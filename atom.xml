<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Haozhe Zhu&#39;s Blog</title>
  
  
  <link href="https://zhutmost.com/atom.xml" rel="self"/>
  
  <link href="https://zhutmost.com/"/>
  <updated>2023-09-22T15:57:32.812Z</updated>
  <id>https://zhutmost.com/</id>
  
  <author>
    <name>Haozhe Zhu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2024å¹´æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸä¼šè®®æ¦‚è§ˆ</title>
    <link href="https://zhutmost.com/Research/asic-conf-ddl-2024/"/>
    <id>https://zhutmost.com/Research/asic-conf-ddl-2024/</id>
    <published>2023-08-14T06:31:19.000Z</published>
    <updated>2023-09-22T15:57:32.812Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†å‡†ç¡®æŠŠæ¡æ¯ä¸€ä¸ªå­¦æœ¯äº¤æµï¼ˆæ‘¸é±¼ï¼‰çš„æœºä¼šï¼Œæœ¬æ–‡æ”¶é›†äº† 2024 å¹´æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸï¼ˆå›ºæ€ç”µè·¯ã€ä½“ç³»ç»“æ„ç­‰ï¼‰çš„ç›¸å…³å­¦æœ¯ä¼šè®®çš„æŠ•ç¨¿ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¬å¼€æ—¶é—´ã€åœ°ç‚¹ã€æˆªç¨¿æ—¶é—´ç­‰ã€‚</p><span id="more"></span><p><strong>å†å²ç‰ˆæœ¬</strong>ï¼š</p><ul><li><a href="https://zhutmost.com/Research/asic-conf-ddl-2023">2023å¹´æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸä¼šè®®æ¦‚è§ˆ</a></li></ul><p>ç”±äºå¤šæ•°ä¼šè®®çš„æŠ•ç¨¿æˆªç¨¿æ—¶é—´éƒ½ä¼šå»¶æœŸä¸€è‡³ä¸¤å‘¨ï¼Œå› æ­¤ä¸‹è¡¨ä¸­çš„æˆªç¨¿æ—¶é—´é€šå¸¸åªæ˜¯ä¸ªå¤§çº¦æ—¶é—´ã€‚è¡¨ä¸­ç©ºç™½ä½ç½®æ˜¯è¿˜æ²¡æœ‰å…¬å¸ƒçš„ä¿¡æ¯ï¼Œæˆ‘ä¼šç»§ç»­æ›´æ–°ã€‚</p><h2 id="å›ºæ€ç”µè·¯"><a href="#å›ºæ€ç”µè·¯" class="headerlink" title="å›ºæ€ç”µè·¯"></a>å›ºæ€ç”µè·¯</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">ISSCC</td><td>San Francisco, CA, US</td><td>2024.02.18</td><td>2023.09.06</td><td><a href="https://www.isscc.org/">Link</a></td></tr><tr><td align="center">VLSI</td><td>Honolulu, HI USA</td><td>2024.06.12</td><td></td><td><a href="https://www.vlsisymposium.org/">Link</a></td></tr><tr><td align="center">ESSERC*</td><td>Bruges, Belgium</td><td>2024.09.09</td><td>2024.04.05</td><td><a href="https://www.esserc2024.org/">Link</a></td></tr><tr><td align="center">ASSCC</td><td></td><td></td><td></td><td></td></tr><tr><td align="center">CICC</td><td>Denver, CO, US</td><td>2024.04.21</td><td>2023.11.06</td><td><a href="https://www.ieee-cicc.org/">Link</a></td></tr><tr><td align="center">HOTCHIPS</td><td></td><td></td><td></td><td><a href="https://hotchips.org/">Link</a></td></tr></tbody></table><blockquote><p>* æ¬§æ´²å›ºæ€ç”µè·¯ä¼šè®®ï¼ˆESSCIRCï¼‰å’Œæ¬§æ´²å›ºæ€å™¨ä»¶ç ”ç©¶ä¼šè®®ï¼ˆESSDERCï¼‰ä» 2024 å¹´èµ·åˆå¹¶ä¸ºæ¬§æ´²å›ºæ€ç”µå­ç ”ç©¶ä¼šè®®ï¼ˆESSERCï¼‰ã€‚</p></blockquote><h2 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">ISCA</td><td>Buenos Aires, Argentina</td><td>2024.06.29</td><td>2023.11.14</td><td><a href="https://iscaconf.org/isca2024/">Link</a></td></tr><tr><td align="center">MICRO</td><td></td><td></td><td></td><td><a href="https://microarch.org/">Link</a></td></tr><tr><td align="center">HPCA</td><td>Edinburgh, Scotland</td><td>2024.03.02</td><td>2023.07.28</td><td><a href="https://hpca-conf.org/2024">Link</a></td></tr><tr><td align="center">DAC</td><td>San Francisco, CA, US</td><td>2024.06.23</td><td></td><td><a href="https://www.dac.com/">Link</a></td></tr></tbody></table><h2 id="æœºå™¨è§†è§‰"><a href="#æœºå™¨è§†è§‰" class="headerlink" title="æœºå™¨è§†è§‰"></a>æœºå™¨è§†è§‰</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">CVPR</td><td>Seattle, WA, US</td><td>2024.06.17</td><td>2023.11.03</td><td><a href="https://cvpr2023.thecvf.com/Conferences/2024">Link</a></td></tr><tr><td align="center">IROS</td><td></td><td></td><td></td><td><a href="https://ieee-iros.org/">Link</a></td></tr><tr><td align="center">ICRA</td><td>Yokohama, Japan</td><td>2024.05.13</td><td>2023.09.15</td><td><a href="https://2024.ieee-icra.org/">Link</a></td></tr></tbody></table><h2 id="å…¶ä»–ä¼šè®®"><a href="#å…¶ä»–ä¼šè®®" class="headerlink" title="å…¶ä»–ä¼šè®®"></a>å…¶ä»–ä¼šè®®</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">ISCAS</td><td>Singapore</td><td>2024.05.19</td><td>2023.10.15</td><td><a href="https://2024.ieee-iscas.org/">Link</a></td></tr><tr><td align="center">AICAS</td><td>Dubai, UAE</td><td>2024.04.15</td><td>2023.10.15</td><td><a href="http://www.aicas2024.org/">Link</a></td></tr><tr><td align="center">APCCAS</td><td>Taipei, Taiwan</td><td>2024.11.07</td><td></td><td><a href="https://ieee-cas.org/event/conference/2024-ieee-asia-pacific-conference-circuits-and-systems">Link</a></td></tr><tr><td align="center">MWSCAS</td><td>Western Springfield, MA, US</td><td>2024.08.11</td><td>2024.03.22</td><td><a href="https://www.mwscas2024.org/">Link</a></td></tr><tr><td align="center">BioCAS</td><td></td><td></td><td></td><td><a href="https://2023.ieee-biocas.org/">Link</a></td></tr><tr><td align="center">GLSVLSI</td><td></td><td></td><td></td><td><a href="https://www.glsvlsi.org/">Link</a></td></tr><tr><td align="center">ICCAD</td><td></td><td></td><td></td><td><a href="https://iccad.com/">Link</a></td></tr><tr><td align="center">ASP-DAC</td><td>Incheon, South Korea</td><td>2024.01.22</td><td>2023.07.28</td><td><a href="https://www.aspdac.com/">Link</a></td></tr><tr><td align="center">DATE</td><td>Valencia, Spain</td><td>2024.03.25</td><td>2023.09.10</td><td><a href="https://www.date-conference.com/">Link</a></td></tr><tr><td align="center">FPGA</td><td>Monterey, CA, US</td><td>2024.03.03</td><td>2023.10.13</td><td><a href="https://www.isfpga.org/">Link</a></td></tr></tbody></table><p>ç¥å¤§å®¶æŠ•ç¨¿é¡ºåˆ©ï½</p><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com" target="_blank" rel="noopener noreferrer" title="unsplash"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">photoed by Birmingham Museums</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸ºäº†å‡†ç¡®æŠŠæ¡æ¯ä¸€ä¸ªå­¦æœ¯äº¤æµï¼ˆæ‘¸é±¼ï¼‰çš„æœºä¼šï¼Œæœ¬æ–‡æ”¶é›†äº† 2024 å¹´æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸï¼ˆå›ºæ€ç”µè·¯ã€ä½“ç³»ç»“æ„ç­‰ï¼‰çš„ç›¸å…³å­¦æœ¯ä¼šè®®çš„æŠ•ç¨¿ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¬å¼€æ—¶é—´ã€åœ°ç‚¹ã€æˆªç¨¿æ—¶é—´ç­‰ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Research" scheme="https://zhutmost.com/categories/Research/"/>
    
    
    <category term="Paper Lives Matter" scheme="https://zhutmost.com/tags/Paper-Lives-Matter/"/>
    
    <category term="AI Chip" scheme="https://zhutmost.com/tags/AI-Chip/"/>
    
  </entry>
  
  <entry>
    <title>ğŸ¿ï¸ Chipmunk Docs - DecoupledIO å¢å¼ºç‰ˆä¹‹ StreamIO</title>
    <link href="https://zhutmost.com/Engineering/chipmunk-stream/"/>
    <id>https://zhutmost.com/Engineering/chipmunk-stream/</id>
    <published>2023-08-09T06:07:49.239Z</published>
    <updated>2023-08-16T11:31:29.332Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æ•°å­—ç”µè·¯è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ Ready&#x2F;Valid æ¡æ‰‹åè®®æ¥è§£è€¦æ•°æ®æµï¼ŒChisel æä¾›äº† <code>DecoupledIO</code> ç”¨ä»¥å®ç°è¿™ä¸€åè®®ã€‚ç„¶è€Œï¼Œ<code>DecoupledIO</code> ä»…æ˜¯ä¸€ä¸ªé¢„ç½®çš„ <code>Bundle</code>ï¼Œç¼ºå°‘ä¸ä¹‹é…å¥—çš„ä¸€ç³»åˆ—å¸¸ç”¨ç»„ä»¶ï¼ˆä¾‹å¦‚å¯„å­˜å™¨åˆ‡ç‰‡ã€Mux&#x2F;Demux ç­‰ï¼‰ï¼Œæ­¤å¤–å®ƒä¹Ÿæœªèƒ½æ­é… <code>chipmunk.IsMasterSlave</code>ã€‚<code>chipmunk</code> ä¸º <code>DecoupledIO</code> æä¾›äº†ä¸€ä¸ªâ€œå¨åŠ›åŠ å¼ºç‰ˆâ€çš„ Ready&#x2F;Valid æ¡æ‰‹åè®®â€”â€”<code>chipmunk.StreamIO</code>ã€‚</p><span id="more"></span><h2 id="Ready-Valid-æ¡æ‰‹åè®®"><a href="#Ready-Valid-æ¡æ‰‹åè®®" class="headerlink" title="Ready&#x2F;Valid æ¡æ‰‹åè®®"></a>Ready&#x2F;Valid æ¡æ‰‹åè®®</h2><img src="/Engineering/chipmunk-stream/ready-valid-protocol.png" class="" title="Ready&#x2F;Valid Interface"><p>Ready&#x2F;Valid æ¡æ‰‹åè®®ç”±ä¸‰éƒ¨åˆ†ä¿¡å·ç»„æˆï¼š</p><ul><li><code>valid</code>ï¼šè¡¨ç¤ºæ•°æ®æœ‰æ•ˆï¼Œå³ä¸Šæ¸¸æ•°æ®å·²ç»å‡†å¤‡å¥½ï¼Œå¯ä»¥è¢«æ¶ˆè´¹ï¼›</li><li><code>ready</code>ï¼šè¡¨ç¤ºæ•°æ®å¯è¢«æ¶ˆè´¹ï¼Œå³ä¸‹æ¸¸å·²ç»å‡†å¤‡å¥½æ¥æ”¶æ•°æ®ï¼›</li><li><code>bits</code>ï¼ˆå³ <code>payload</code>ï¼‰ï¼šè¡¨ç¤ºæ•°æ®æœ¬èº«ã€‚</li></ul><p>å…¶ä¸­ï¼Œ<code>valid</code> å’Œ <code>bits</code> ä¿¡å·ç”±ä¸Šæ¸¸äº§ç”Ÿï¼Œ<code>ready</code> ä¿¡å·ç”±ä¸‹æ¸¸äº§ç”Ÿã€‚å½“ <code>valid</code> å’Œ <code>ready</code> ä¿¡å·åŒæ—¶æœ‰æ•ˆæ—¶ï¼Œ<code>bits</code> ä¿¡å·è¢«ä¼ é€’ï¼Œå³æ•°æ®è¢«æ¶ˆè´¹ã€‚åˆ©ç”¨è¿™ä¸€åè®®ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®æµçš„ç”Ÿäº§å’Œæ¶ˆè´¹è§£è€¦ï¼šä¸Šæ¸¸æ¨¡å—åªéœ€è¦åœ¨å‡†å¤‡å¥½æ•°æ®åå°† <code>valid</code> å’Œ <code>bits</code> ä¿¡å·ç½®ä¸ºæœ‰æ•ˆï¼Œè€Œæ— éœ€å…³å¿ƒä¸‹æ¸¸æ¨¡å—å†…éƒ¨çš„çŠ¶æ€ï¼›è€Œä¸‹æ¸¸æ¨¡å—åªéœ€è¦åœ¨å‡†å¤‡å¥½æ¥æ”¶æ•°æ®åå°† <code>ready</code> ä¿¡å·ç½®ä¸ºæœ‰æ•ˆï¼Œå½“ <code>valid</code> å’Œ <code>ready</code> ä¿¡å·åŒæ—¶æœ‰æ•ˆæ—¶å–èµ° <code>bits</code> æ•°æ®ã€‚é€šè¿‡ä½¿ç”¨ Ready&#x2F;Valid æ¡æ‰‹åè®®ï¼Œå¼€å‘è€…å¯ä»¥å°†æ³¨æ„åŠ›é›†ä¸­åœ¨è‡ªå·±è´Ÿè´£çš„ç”µè·¯é€»è¾‘ä¸Šï¼Œè€Œæ— éœ€è¿‡åº¦å…³å¿ƒå…¶ä»–æ¨¡å—çš„å†…éƒ¨å®ç°ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†é¿å…ç»„åˆé€»è¾‘ç¯è·¯ï¼Œæˆ‘ä»¬è¦æ±‚ <code>valid</code>ï¼ˆåŠ <code>bits</code>ï¼‰å’Œ <code>ready</code> ä¿¡å·ä¸èƒ½åŒæ—¶ä¾èµ–å¯¹æ–¹çš„å½“å‰çŠ¶æ€ã€‚å› æ­¤ï¼Œåœ¨ Chipmunkï¼ˆå’Œå…¶ä»–ç»å¤§å¤šæ•°æ•°å­—ç”µè·¯è®¾è®¡ï¼‰ä¸­ï¼Œæˆ‘ä»¬çº¦å®š <code>valid</code> ä¸å…è®¸ä¾èµ–äº <code>ready</code> çš„å½“å‰çŠ¶æ€ï¼Œå³ä¸Šæ¸¸æ¨¡å—ä¸å…è®¸æ ¹æ®ä¸‹æ¸¸æ¨¡å—æ­¤åˆ»æ˜¯å¦ <code>ready</code> æ¥å†³å®šå½“å‰å‘¨æœŸæ˜¯å¦å°† <code>valid</code> ç½®ä¸ºæœ‰æ•ˆã€‚ç®€å•åœ°è¯´ï¼Œç”¨äº <code>valid</code> äº§ç”Ÿçš„ç»„åˆé€»è¾‘è¡¨è¾¾å¼ä¸­ä¸èƒ½å‡ºç°ä¸‹æ¸¸æ¨¡å—çš„ <code>ready</code> ä¿¡å·ã€‚</p><p>å…³äº Ready&#x2F;Valid æ¡æ‰‹åè®®çš„æ›´å¤šç»†èŠ‚ï¼Œç½‘ä¸Šå·²ç»æœ‰äº†ä¸°å¯Œçš„ææ–™å¯ä»¥å‚è€ƒï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h2 id="å…³äº-StreamIO"><a href="#å…³äº-StreamIO" class="headerlink" title="å…³äº StreamIO"></a>å…³äº <code>StreamIO</code></h2><h3 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h3><p>Chisel æä¾›äº† <code>DecoupledIO</code> å’Œ <code>IrrevocableIO</code> ä¸¤ä¸ª Ready&#x2F;Valid æ¡æ‰‹åè®®çš„ <code>Bundle</code> å®ç°ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿è‡ª <code>chisel3.ReadyValidIO</code>ã€‚Chisel å¹¶æœªä¸ºè¿™ä¸¤ä¸ªæ¥å£æä¾›å¤ªå¤š APIï¼ŒåŸºæœ¬ä¸Šåªæœ‰ï¼š</p><ul><li><code>def fire: Bool = ready &amp;&amp; valid</code>ï¼Œè¡¨ç¤ºå½“å‰å‘¨æœŸæ˜¯å¦å‘ç”Ÿäº†æ•°æ®ä¼ è¾“ï¼›</li><li><code>class Queue</code>ï¼Œä»¥ <code>ReadyValidIO</code> ä¸ºæ¥å£çš„åŒæ­¥ FIFOï¼›</li><li><code>def map[T](f: T =&gt; T2): T</code>ï¼Œç”¨äºå¯¹ <code>bits</code> è¿›è¡Œå˜æ¢ã€‚</li></ul><p><code>IrrevocableIO</code> å…¶å®åœ¨å®ç°ä¸Š <code>DecoupledIO</code> å¹¶æ— åŒºåˆ«ï¼Œåªæ˜¯çº¦å®šå®ƒçš„ <code>bits</code> åœ¨ <code>valid</code> æœ‰æ•ˆä½† <code>ready</code> æ— æ•ˆæ—¶ä¸ä¼šæ”¹å˜ï¼Œå³æ•°æ®ä¸å¯æ’¤å›ã€‚ä¸¤è€…çš„å®é™…å·®åˆ«æœ‰èµ–äºå…·ä½“æ¨¡å—ä¸­çš„ç”µè·¯å®ç°ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œä¸Šè¿° API ä¸è¶³ä»¥åº”ä»˜å®é™…çš„è®¾è®¡éœ€æ±‚ã€‚</p><p>Chipmunk åœ¨ <code>chisel3.ReadyValidIO</code> çš„åŸºç¡€ä¸Šæä¾›äº† <code>chipmunk.StreamIO</code>ï¼Œå®ƒç»§æ‰¿è‡ª <code>chisel3.ReadyValidIO</code>ï¼Œå¹¶æä¾›äº†ä¸€ç³»åˆ—å¸¸ç”¨çš„ API å’Œç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>ä¸€ç³»åˆ—ç±»ä¼¼<code>fire</code> çš„è¯­æ³•ç³–ï¼Œå±•ç°æ•°æ®ä¼ è¾“çš„ä¸åŒçŠ¶æ€ï¼›</li><li>ç¬¦å·åŒ–çš„è¿æ¥æ–¹æ³•ï¼Œç±»ä¼¼ <code>a &gt;&gt; b &gt;-&gt; c</code>ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºæ•°æ®çš„æµå‘ï¼›</li><li>é’ˆå¯¹ <code>bits</code> çš„ä¸€ç³»åˆ—æ“ä½œï¼ŒåŒ…æ‹¬ Mapã€Cast ç­‰ï¼›</li><li>ä¸€ç³»åˆ—å¸¸ç”¨çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬å¯„å­˜å™¨åˆ‡ç‰‡ï¼ˆRegister Sliceï¼‰ã€Fork&#x2F;Joinã€Mux&#x2F;Demux ç­‰ã€‚</li></ul><p><code>StreamIO</code> åœ¨å®ç°ä¸Šå‚è€ƒäº† <a href="https://spinalhdl.github.io/SpinalDoc-RTD/master/SpinalHDL/Libraries/stream.html">SpinalHDL</a> çš„ <code>Stream</code> çš„ API è®¾è®¡ï¼Œç†Ÿæ‚‰ SpinalHDL çš„åŒå­¦åº”è¯¥ä¼šæœ‰ä¸€ä¸ç†Ÿæ‚‰çš„æ„Ÿè§‰ã€‚</p><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><h4 id="StreamIO-ä¾‹åŒ–"><a href="#StreamIO-ä¾‹åŒ–" class="headerlink" title="StreamIO ä¾‹åŒ–"></a>StreamIO ä¾‹åŒ–</h4><ul><li><p>åˆ›å»ºä¸€ä¸ª <code>StreamIO</code>ï¼Œå…¶ <code>payload</code> ç±»å‹ä¸º <code>UInt</code>ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> myStream = <span class="type">Wire</span>(<span class="type">Stream</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>)))</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ª <code>StreamIO</code>ï¼Œå…¶ <code>payload</code> ç±»å‹å’Œå¦ä¸€ä¸ª <code>DecoupledIO</code> çš„ <code>bits</code> ä¸€è‡´ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> myDecoupled = <span class="type">Wire</span>(<span class="type">Decoupled</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>)))</span><br><span class="line"><span class="keyword">val</span> myStream = <span class="type">Wire</span>(<span class="type">Stream</span>(myDecoupled))</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„è¿™é‡Œ <code>myStream</code> ä¸ä¼šä¸ <code>myDecoupled</code> æœ‰ä»»ä½•ç”µè·¯è¿æ¥ï¼ˆæ¯”å¦‚å…±äº« <code>bits</code>ï¼‰ï¼Œè€Œæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>UInt</code> ä½œä¸º <code>payload</code>ã€‚</p></li><li><p>åˆ›å»ºä¸€ä¸ªç©ºçš„ <code>StreamIO</code>ï¼ˆå³å…¶ <code>payload</code> ç±»å‹ä¸º <code>EmptyBundle</code>ï¼‰ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> myStream = <span class="type">Wire</span>(<span class="type">Stream</span>.empty)</span><br></pre></td></tr></table></figure><p>ç©ºçš„ <code>StreamIO</code> ä¸€èˆ¬ç”¨äºå£°æ˜æ—¶æ²¡æœ‰ç¡®å®š <code>payload</code> ç±»å‹çš„æƒ…å†µï¼Œåç»­å¯ä»¥æ­é… <code>payloadReplace</code> ç­‰ API èµ‹äºˆå…·ä½“çš„ <code>payload</code>ã€‚</p></li></ul><h4 id="æµæ§ä¸çŠ¶æ€æŒ‡ç¤º"><a href="#æµæ§ä¸çŠ¶æ€æŒ‡ç¤º" class="headerlink" title="æµæ§ä¸çŠ¶æ€æŒ‡ç¤º"></a>æµæ§ä¸çŠ¶æ€æŒ‡ç¤º</h4><p><code>StreamIO</code> æä¾›ä»¥ä¸‹çŠ¶æ€æŒ‡ç¤ºæ–¹æ³•ï¼Œå®ƒä»¬çš„è¿”å›ç±»å‹å‡ä¸º <code>Bool</code>ï¼š</p><table><thead><tr><th align="left">è¯­æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>x.fire</code></td><td align="left">å½“å‰å‘¨æœŸæ­£åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå³ <code>ready &amp;&amp; valid</code></td></tr><tr><td align="left"><code>x.isPending</code></td><td align="left">ä¸Šæ¸¸æ•°æ®å·²ç»å°±ç»ªï¼Œä½†ä¸‹æ¸¸æœªèƒ½å‡†å¤‡å¥½æ¥æ”¶ï¼Œå³ <code>!ready &amp;&amp; valid</code></td></tr><tr><td align="left"><code>x.isStarving</code></td><td align="left">ä¸‹æ¸¸å·²å‡†å¤‡å¥½æ¥æ”¶æ•°æ®ï¼Œä½†ä¸Šæ¸¸æ²¡æœ‰å‘èµ·ä¼ è¾“ï¼Œå³ <code>ready &amp;&amp; !valid</code></td></tr></tbody></table><p><code>StreamIO</code> ä¹Ÿæä¾›ä¸‹åˆ—æ–¹æ³•å¯¹æ•°æ®æµè¿›è¡Œæµæ§ï¼Œå®ƒä»¬ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>StreamIO</code>ï¼š</p><table><thead><tr><th align="left">è¯­æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>x.haltWhen(cond)</code></td><td align="left">å½“ <code>cond</code> ä¸º <code>True</code> æ—¶ï¼Œæ•°æ®ä¼ è¾“ä¼šè¢«é˜»æ–­ï¼Œå³ä¸Šä¸‹æ¸¸æ¨¡å—å‡æ— æ³•å®Œæˆæ¡æ‰‹ã€‚</td></tr><tr><td align="left"><code>x.continueWhen(cond)</code></td><td align="left">ç›¸å½“äº <code>x.haltWhen(!cond)</code></td></tr><tr><td align="left"><code>x.throwWhen(cond)</code></td><td align="left">å½“ <code>cond</code> ä¸º <code>True</code> æ—¶ï¼Œæ•°æ®ä¼ è¾“ä¼šè¢«ä¸¢å¼ƒï¼Œå³ä¸Šæ¸¸æ¨¡å—å‘èµ·çš„æ•°æ®ä¼ è¾“éƒ½ä¼šæˆåŠŸæ¡æ‰‹ï¼Œä½†ä¸‹æ¸¸æ¨¡å—ä¸ä¼šæ”¶åˆ°ç›¸åº”çš„æ•°æ®ã€‚</td></tr><tr><td align="left"><code>x.takeWhen(cond)</code></td><td align="left">ç›¸å½“äº <code>x.throwWhen(!cond)</code></td></tr></tbody></table><h4 id="Payload-å˜æ¢"><a href="#Payload-å˜æ¢" class="headerlink" title="Payload å˜æ¢"></a>Payload å˜æ¢</h4><img src="/Engineering/chipmunk-stream/stream-payload-operation.png" class="" title="StreamIO Payload Operation"><p><code>StreamIO</code> å…è®¸å¯¹ <code>payload</code> ç›´æ¥è¿›è¡Œä¸€ç³»åˆ—å˜æ¢ï¼ŒåŒ…æ‹¬ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">payloadMap</span></span>[<span class="type">T2</span> &lt;: <span class="type">Data</span>](f: <span class="type">T</span> =&gt; <span class="type">T2</span>): <span class="type">StreamIO</span>[<span class="type">T2</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">payloadReplace</span></span>[<span class="type">T2</span> &lt;: <span class="type">Data</span>](p: <span class="type">T2</span>): <span class="type">StreamIO</span>[<span class="type">T2</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">payloadCast</span></span>[<span class="type">T2</span> &lt;: <span class="type">Data</span>](gen: <span class="type">T2</span>, checkWidth: <span class="type">Boolean</span> = <span class="literal">false</span>): <span class="type">StreamIO</span>[<span class="type">T2</span>]</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>StreamIO</code>ï¼Œå…¶ <code>payload</code> ä¼šå˜æˆå˜æ¢åã€ç±»å‹ä¸º <code>T2</code> çš„æ–°ä¿¡å·ï¼ŒåŒæ—¶å…¶ <code>ready</code> å’Œ <code>valid</code> ä¿¡å·ä¼šè¿æ¥åˆ°å½“å‰ <code>StreamIO</code> çš„ <code>ready</code> å’Œ <code>valid</code> ä¿¡å·ã€‚</p><ul><li><p><code>payloadMap</code> å¯ä»¥å°†å‡½æ•° <code>f</code> ä½œç”¨äº <code>payload</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamOld = <span class="type">Wire</span>(<span class="type">Stream</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>)))</span><br><span class="line"><span class="keyword">val</span> <span class="type">StreamNew</span> = streamOld.payloadMap(_ + <span class="number">1.</span><span class="type">U</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>payloadReplace</code> ä¼šå°† <code>payload</code> æ›¿æ¢ä¸º <code>p</code>ï¼Œç›¸å½“äº <code>payloadMap(_ =&gt; p)</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamOld = <span class="type">Wire</span>(<span class="type">Stream</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>)))</span><br><span class="line"><span class="keyword">val</span> anotherBool = <span class="type">Wire</span>(<span class="type">Bool</span>())</span><br><span class="line"><span class="keyword">val</span> <span class="type">StreamNew</span> = streamOld.payloadReplace(anotherBool)</span><br></pre></td></tr></table></figure></li><li><p><code>payloadCast</code> ä¼šå¯¹ <code>payload</code> è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç›¸å½“äº <code>payloadMap(_.asTypeOf(gen))</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamOld = <span class="type">Wire</span>(<span class="type">Stream</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>)))</span><br><span class="line"><span class="keyword">val</span> <span class="type">StreamNew</span> = streamOld.payloadCast(<span class="type">SInt</span>(<span class="number">32.</span><span class="type">W</span>), checkWidth = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å‚æ•° <code>checkWidth = true</code> å…è®¸æ£€æŸ¥ç±»å‹è½¬æ¢å‰åçš„ä½å®½æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´æŠ›å‡ºå¼‚å¸¸ã€‚è¯¥å‚æ•°é»˜è®¤ä¸º <code>false</code>ï¼Œå³ä¸ä¼šæ£€æŸ¥ä½å®½ï¼Œå¦‚æœä½å®½ä¸ä¸€è‡´ä¼šè‡ªåŠ¨æˆªæ–­æˆ–æ‰©å±•ã€‚</p></li></ul><h4 id="å¯„å­˜å™¨åˆ‡ç‰‡ï¼ˆRegister-Sliceï¼‰"><a href="#å¯„å­˜å™¨åˆ‡ç‰‡ï¼ˆRegister-Sliceï¼‰" class="headerlink" title="å¯„å­˜å™¨åˆ‡ç‰‡ï¼ˆRegister Sliceï¼‰"></a>å¯„å­˜å™¨åˆ‡ç‰‡ï¼ˆRegister Sliceï¼‰</h4><p>ä¸º <code>StreamIO</code> æ’å…¥å¯„å­˜å™¨åˆ‡ç‰‡ä»¥æ”¹å–„æ—¶åºï¼Œæ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œè¿™å®ç°èµ·æ¥éå¸¸ç¹çä¸”æ˜“é”™ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨ <code>StreamIO</code> çš„ <code>ready</code>&#x2F;<code>valid</code>&#x2F;<code>bits</code> è·¯å¾„ä¸Šè´¸ç„¶æ’å…¥å¯„å­˜å™¨åˆ‡ç‰‡ã€‚<code>valid</code> å’Œ <code>ready</code> åˆ†åˆ«ä»£è¡¨å½“å‰å‘¨æœŸä¸Šæ¸¸æ¨¡å—å’Œä¸‹æ¸¸æ¨¡å—çš„çŠ¶æ€ï¼Œåœ¨å®ƒä»¬çš„ä¼ æ’­é€šè·¯ä¸Šå¼•å…¥å¯„å­˜å™¨ä¼šå¯¼è‡´çŠ¶æ€å»¶åè‹¥å¹²å‘¨æœŸæ‰ä¼šä¼ æ’­åˆ°å¯¹ä¾§ã€‚è¿™ä¼šå¯¼è‡´ä¸Šä¸‹æ¸¸æ¨¡å—æ— æ³•åœ¨æ­£ç¡®çš„æ—¶æœºå®Œæˆæ¡æ‰‹ï¼Œå¯èƒ½ä¼šå¼•èµ·æ•°æ®ä¸¢å¤±æˆ–ååä¸‹é™ã€‚</p><p>æ ¹æ®å¯„å­˜å™¨æ’å…¥ä½ç½®ä¸åŒï¼Œ<code>StreamIO</code> æä¾›ï¼š</p><ul><li><code>pipeForward</code>ï¼šå‰å‘å¯„å­˜å™¨åˆ‡ç‰‡ï¼Œåˆ‡æ–­ä»ä¸Šæ¸¸æ¨¡å—åˆ°ä¸‹æ¸¸æ¨¡å—çš„ <code>valid</code> å’Œ <code>bits</code> é€šè·¯çš„ç»„åˆé€»è¾‘è·¯å¾„ï¼›<figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamNew = streamOld.pipeForward()</span><br></pre></td></tr></table></figure>å®ƒåœ¨æ€§èƒ½ä¸Šä¸ä¼šå¼•å…¥ååä¸‹é™ï¼ˆè™½ç„¶ä¼šå¢åŠ  1 å‘¨æœŸå»¶æ—¶ï¼‰ï¼Œåœ¨é¢ç§¯ä¸Šä»£ä»·æ˜¯ N + 1 ä¸ªå¯„å­˜å™¨ï¼ˆN æ˜¯ <code>bits</code> ä½å®½ï¼‰ä»¥åŠå°‘é‡ç»„åˆé€»è¾‘ã€‚</li><li><code>pipeBackward</code>ï¼šåå‘å¯„å­˜å™¨åˆ‡ç‰‡ï¼Œåˆ‡æ–­ä»ä¸‹æ¸¸æ¨¡å—åˆ°ä¸Šæ¸¸æ¨¡å—çš„ <code>ready</code> é€šè·¯çš„ç»„åˆé€»è¾‘è·¯å¾„ã€‚<figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamNew = streamOld.pipeBackward()</span><br></pre></td></tr></table></figure>å®ƒåœ¨æ€§èƒ½ä¸Šä¸ä¼šå¼•å…¥é¢å¤–çš„å»¶æ—¶å’Œååä¸‹é™ï¼Œåœ¨é¢ç§¯ä¸Šä»£ä»·æ˜¯ N + 1 ä¸ªå¯„å­˜å™¨ï¼ˆN æ˜¯ <code>bits</code> ä½å®½ï¼‰ã€N ä¸ª 2:1 MUX ä»¥åŠå°‘é‡ç»„åˆé€»è¾‘ã€‚</li><li><code>pipeAll</code>ï¼šåŒå‘å¯„å­˜å™¨åˆ‡ç‰‡ï¼ŒåŒæ—¶åˆ‡æ–­ <code>valid</code>ã€<code>bits</code>ã€<code>ready</code> é€šè·¯çš„ç»„åˆé€»è¾‘è·¯å¾„ã€‚<figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamNew = streamOld.pipeAll()</span><br></pre></td></tr></table></figure>ç›¸å½“äº <code>streamOld.pipeForward().pipeBackward()</code>ï¼Œå› æ­¤å®ƒä¼šå¼•å…¥ 2N + 2 ä¸ªå¯„å­˜å™¨ï¼ˆN æ˜¯ <code>bits</code> ä½å®½ï¼‰ã€N ä¸ª 2:1 MUX ä»¥åŠå°‘é‡ç»„åˆé€»è¾‘ã€‚</li><li><code>pipeSimple</code>ï¼šåŒå‘å¯„å­˜å™¨åˆ‡ç‰‡ï¼ŒåŒæ—¶åˆ‡æ–­ <code>valid</code>ã€<code>bits</code>ã€<code>ready</code> é€šè·¯çš„ç»„åˆé€»è¾‘è·¯å¾„ã€‚<figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamNew = streamOld.pipeSimple()</span><br></pre></td></tr></table></figure>å®ƒè‡³å¤šæ¯éš”ä¸€ä¸ªå‘¨æœŸæ¡æ‰‹ä¸€æ¬¡ï¼Œå› æ­¤ä¼šå¼•èµ·æœ€é«˜å¯è¾¾ä¸€åŠçš„ååæŸå¤±ï¼Œä½†é¢ç§¯ä¸Šåªéœ€è¦ N + 2 ä¸ªå¯„å­˜å™¨ä»¥åŠå°‘é‡çš„ç»„åˆé€»è¾‘ã€‚ä¸ <code>pipeAll</code> ç›¸æ¯”ï¼Œå®ƒçš„é¢ç§¯ä»£ä»·æ›´å°ï¼Œä½†ä¼šå¼•å…¥é¢å¤–çš„æ€§èƒ½æŸå¤±ã€‚</li><li><code>pipeValid</code>ï¼šä»…åˆ‡æ–­ <code>valid</code> é€šè·¯çš„ç»„åˆé€»è¾‘è·¯å¾„ã€‚<figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamNew = streamOld.pipeValid()</span><br></pre></td></tr></table></figure>é¢ç§¯ä¸Šä»…éœ€è¦ 1 ä¸ªå¯„å­˜å™¨å’Œå°‘é‡ç»„åˆé€»è¾‘ã€‚</li><li><code>pipPassThrough</code>ï¼šä»€ä¹ˆéƒ½ä¸åšï¼Œè¿”å›å½“å‰çš„ <code>StreamIO</code>ã€‚<figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> streamNew = streamOld.pipPassThrough()</span><br></pre></td></tr></table></figure></li></ul><h4 id="ç¬¦å·åŒ–è¿æ¥"><a href="#ç¬¦å·åŒ–è¿æ¥" class="headerlink" title="ç¬¦å·åŒ–è¿æ¥"></a>ç¬¦å·åŒ–è¿æ¥</h4><p><code>StreamIO</code> æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ç”¨äºè¿æ¥å…¶ä»– <code>StreamIO</code>ï¼š</p><table><thead><tr><th align="left">è¯­æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>x.connectFrom(y)</code></td><td align="left">ç”¨ <code>y</code> é©±åŠ¨ <code>x</code>ï¼Œå³ <code>y</code> ä½œä¸º <code>x</code> çš„ä¸Šæ¸¸è¿›è¡Œè¿æ¥ <code>ready</code>ã€<code>valid</code>ã€<code>bits</code> ä¿¡å·</td></tr><tr><td align="left"><code>x.handshakeFrom(y)</code></td><td align="left">å’Œ <code>connectFrom</code> ç±»ä¼¼ï¼Œä½†åªè¿æ¥ <code>ready</code>ã€<code>valid</code> ä¿¡å·ï¼Œä¸è¿æ¥ <code>bits</code> ä¿¡å·</td></tr><tr><td align="left"><code>x &lt;&lt; y</code></td><td align="left">ç›¸å½“äº <code>x.connectFrom(y)</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &gt;&gt; y</code></td><td align="left">ç›¸å½“äº <code>y.connectFrom(x)</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &lt;-&lt; y</code></td><td align="left">ç›¸å½“äº <code>x &lt;&lt; y.pipeForward()</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &gt;-&gt; y</code></td><td align="left">ç›¸å½“äº <code>x.pipeForward() &gt;&gt; y</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &lt;|&lt; y</code></td><td align="left">ç›¸å½“äº <code>x &lt;&lt; y.pipeBackward()</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &gt;|&gt; y</code></td><td align="left">ç›¸å½“äº <code>x.pipeBackward() &gt;&gt; y</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &lt;+&lt; y</code></td><td align="left">ç›¸å½“äº <code>x &lt;&lt; y.pipeAll()</code>ï¼Œè¿”å› <code>y</code></td></tr><tr><td align="left"><code>x &gt;+&gt; y</code></td><td align="left">ç›¸å½“äº <code>x.pipeAll() &gt;&gt; y</code>ï¼Œè¿”å› <code>y</code></td></tr></tbody></table><p>å€ŸåŠ© <code>&lt;&lt;</code>ã€<code>&gt;&gt;</code> ç­‰æµæ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¯è¯»æ€§è¾ƒå¼ºçš„ <code>StreamIO</code> è¿æ¥ç”šè‡³çº§è¿ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> s1 = <span class="type">Stream</span>(<span class="type">UInt</span>(<span class="number">8.</span><span class="type">W</span>))</span><br><span class="line">s1 &lt;-&lt; uAnotherModule.io.outStream</span><br><span class="line">s1.haltWhen(somethingEnable) &gt;&gt; uSomeModule.io.inStream</span><br></pre></td></tr></table></figure><h2 id="é…å¥—ç»„ä»¶"><a href="#é…å¥—ç»„ä»¶" class="headerlink" title="é…å¥—ç»„ä»¶"></a>é…å¥—ç»„ä»¶</h2><p>Chipmunk åŒ…æ‹¬äº†ä¸€ç³»åˆ— <code>StreamIO</code> çš„é…å¥—ç»„ä»¶ã€‚</p><h3 id="StreamFork-StreamJoin"><a href="#StreamFork-StreamJoin" class="headerlink" title="StreamFork&#x2F;StreamJoin"></a>StreamFork&#x2F;StreamJoin</h3><p>StreamFork å¯ä»¥å°†ä¸€ä¸ªä¸Šæ¸¸ <code>StreamIO</code> åˆ†å‰æˆå¤šä¸ªä¸‹æ¸¸ <code>StreamIO</code>ï¼Œæ¯ä¸ªä¸‹æ¸¸ <code>StreamIO</code> ä¼šåˆ†åˆ«å®Œæˆä»…ä¸€æ¬¡æ¡æ‰‹ï¼Œä¸Šæ¸¸ <code>StreamIO</code> ä¼šåœ¨æ‰€æœ‰ä¸‹æ¸¸ <code>StreamIO</code> å®Œæˆæ¡æ‰‹åæ‰å®Œæˆæ¡æ‰‹ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œæ¯ä¸ªä¸‹æ¸¸ <code>StreamIO</code> æ˜¯å¦æ¡æ‰‹æ˜¯ç‹¬ç«‹è¿›è¡Œçš„ï¼Œå½“å®ƒ <code>ready</code> æœ‰æ•ˆæ—¶å³å®Œæˆæ¡æ‰‹ï¼Œè€Œä¸éœ€è¦ç­‰åˆ°æ‰€æœ‰ä¸‹æ¸¸ <code>StreamIO</code> çš„ <code>ready</code> éƒ½æœ‰æ•ˆã€‚</p><p>StreamJoin å¯ä»¥å°†å¤šä¸ªä¸Šæ¸¸ <code>StreamIO</code> åˆå¹¶æˆä¸€ä¸ªä¸‹æ¸¸ <code>StreamIO</code>ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰ä¸Šæ¸¸ <code>StreamIO</code> çš„ <code>valid</code> éƒ½æœ‰æ•ˆæ—¶ï¼Œæ‰ä¼šå‘ç”Ÿæ¡æ‰‹ã€‚</p><p>åœ¨ <code>object StreamFork</code>&#x2F;<code>object StreamJoin</code> ä¸­ï¼ŒChipmunk æä¾›äº†å¤šä¸ªæ¥å£ç•¥æœ‰å·®åˆ«çš„æ–¹æ³•ã€‚ç”¨æˆ·å¯ä»¥é˜…è¯»ä»£ç ä¸­çš„æ³¨é‡Šï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚</p><h3 id="StreamMux-Demux-â€¦"><a href="#StreamMux-Demux-â€¦" class="headerlink" title="StreamMux&#x2F;Demux&#x2F;â€¦"></a>StreamMux&#x2F;Demux&#x2F;â€¦</h3><p>TODO</p><h2 id="See-Also"><a href="#See-Also" class="headerlink" title="See Also"></a>See Also</h2><ul><li><a href="https://github.com/zhutmost/chipmunk">Chipmunk Github</a></li></ul><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com" target="_blank" rel="noopener noreferrer" title="Unsplash"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">photoed by Annegret Kammer</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨æ•°å­—ç”µè·¯è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ Ready&amp;#x2F;Valid æ¡æ‰‹åè®®æ¥è§£è€¦æ•°æ®æµï¼ŒChisel æä¾›äº† &lt;code&gt;DecoupledIO&lt;/code&gt; ç”¨ä»¥å®ç°è¿™ä¸€åè®®ã€‚ç„¶è€Œï¼Œ&lt;code&gt;DecoupledIO&lt;/code&gt; ä»…æ˜¯ä¸€ä¸ªé¢„ç½®çš„ &lt;code&gt;Bundle&lt;/code&gt;ï¼Œç¼ºå°‘ä¸ä¹‹é…å¥—çš„ä¸€ç³»åˆ—å¸¸ç”¨ç»„ä»¶ï¼ˆä¾‹å¦‚å¯„å­˜å™¨åˆ‡ç‰‡ã€Mux&amp;#x2F;Demux ç­‰ï¼‰ï¼Œæ­¤å¤–å®ƒä¹Ÿæœªèƒ½æ­é… &lt;code&gt;chipmunk.IsMasterSlave&lt;/code&gt;ã€‚&lt;code&gt;chipmunk&lt;/code&gt; ä¸º &lt;code&gt;DecoupledIO&lt;/code&gt; æä¾›äº†ä¸€ä¸ªâ€œå¨åŠ›åŠ å¼ºç‰ˆâ€çš„ Ready&amp;#x2F;Valid æ¡æ‰‹åè®®â€”â€”&lt;code&gt;chipmunk.StreamIO&lt;/code&gt;ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Engineering" scheme="https://zhutmost.com/categories/Engineering/"/>
    
    
    <category term="Chisel" scheme="https://zhutmost.com/tags/Chisel/"/>
    
    <category term="Chipmunk" scheme="https://zhutmost.com/tags/Chipmunk/"/>
    
  </entry>
  
  <entry>
    <title>ğŸ¿ï¸ Chipmunk - Bits/Data ç­‰çš„æ›´å¤šæ–¹æ³•</title>
    <link href="https://zhutmost.com/Engineering/chipmunk-bits-misc/"/>
    <id>https://zhutmost.com/Engineering/chipmunk-bits-misc/</id>
    <published>2023-06-10T13:21:59.059Z</published>
    <updated>2023-08-16T11:31:57.704Z</updated>
    
    <content type="html"><![CDATA[<p><code>chipmunk</code> ä¸º Chisel çš„åŸç”Ÿç±»å‹ <code>Bits</code>&#x2F;<code>Data</code> ç­‰å¢åŠ äº†è‹¥å¹²é¢å¤–çš„æ–¹æ³•ï¼ˆä¸»è¦æ˜¯è¯­æ³•ç³–ï¼‰ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›æ›´åŠ ä¾¿æ·çš„ç¼–ç é€‰æ‹©ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p><span id="more"></span><h2 id="chisel3-Bits-çš„é¢å¤–æ–¹æ³•"><a href="#chisel3-Bits-çš„é¢å¤–æ–¹æ³•" class="headerlink" title="chisel3.Bits çš„é¢å¤–æ–¹æ³•"></a><code>chisel3.Bits</code> çš„é¢å¤–æ–¹æ³•</h2><p><code>chisel3.Bits</code> æ˜¯ Chisel çš„ <code>UInt</code>&#x2F;<code>SInt</code>&#x2F;<code>Bool</code> ç­‰ç±»å‹çš„çˆ¶ç±»ï¼Œå› æ­¤ä»¥ä¸‹æ–¹æ³•å¯ä»¥è¢«è¿™äº›ç±»å‹çš„å®ä¾‹è°ƒç”¨ã€‚</p><p>è¿™äº›æ–¹æ³•æ˜¯åœ¨ <code>chipmunk.AddMethodsToBits</code> è¿™ä¸ªéšå¼ç±»ä¸­å®ç°çš„ã€‚</p><h3 id="msb-lsb-â€”-è·å–ä¿¡å·çš„æœ€é«˜-ä½-n-æ¯”ç‰¹"><a href="#msb-lsb-â€”-è·å–ä¿¡å·çš„æœ€é«˜-ä½-n-æ¯”ç‰¹" class="headerlink" title="msb&#x2F;lsb â€” è·å–ä¿¡å·çš„æœ€é«˜&#x2F;ä½ n æ¯”ç‰¹"></a><code>msb</code>&#x2F;<code>lsb</code> â€” è·å–ä¿¡å·çš„æœ€é«˜&#x2F;ä½ n æ¯”ç‰¹</h3><p><code>chisel3.Bits</code> å·²æä¾›äº†ç±»ä¼¼çš„æ–¹æ³• <code>x.head(n)</code> å’Œ <code>x.tail(n)</code>ï¼Œå…¶ä¸­å‰è€…æ˜¯è·å–è¯¥ä¿¡å·çš„é«˜ n æ¯”ç‰¹ï¼Œåè€…æ˜¯å»æ‰è¯¥ä¿¡å·çš„é«˜ n æ¯”ç‰¹ï¼ˆç›¸å½“äº <code>x.head(x.getWidth - n)</code>ï¼‰ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¾ç„¶æ˜¯æ¥è‡ªå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å¤„ç†é˜Ÿåˆ—çš„ä¹ æƒ¯ï¼ˆ<del>Haskell ç”¨æˆ·ç‹‚å–œ</del>ï¼‰ï¼Œä½†å’Œç»å¤§å¤šæ•°ç¡¬ä»¶å·¥ç¨‹å¸ˆçš„ä¹ æƒ¯å¾ˆä¸ä¸€è‡´ï¼Œä¸”å¯¼è‡´ä»£ç å¯è¯»æ€§é™ä½ã€‚ç¡¬ä»¶å·¥ç¨‹å¸ˆä¹ æƒ¯ç”¨â€œæŸæŸä¿¡å·çš„é«˜Næ¯”ç‰¹&#x2F;ä½Næ¯”ç‰¹â€æ¥å¯¹å¤šæ¯”ç‰¹ä¿¡å·è¿›è¡Œåˆ‡ç‰‡ã€‚</p><p>å› æ­¤ï¼ŒChipmunk æä¾›äº† <code>x.msb(n)</code> å’Œ <code>x.lsb(n)</code> ä¸¤ç»„æ–¹æ³•ï¼Œå®ƒä»¬çš„åŠŸèƒ½æ­£å¦‚æ–¹æ³•åï¼ˆmost&#x2F;least significant bitsï¼‰ï¼šå‰è€… <code>x.msb(n)</code> å’Œ <code>x.head(n)</code> è¡Œä¸ºç±»ä¼¼ï¼Œåè€… <code>x.lsb(n)</code> åˆ™æ˜¯è·å–è¯¥ä¿¡å·çš„ä½ n æ¯”ç‰¹ã€‚</p><p>å…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>def msb(n: Int = 1): UInt</code><br>è¿”å›å½“å‰ä¿¡å·å®ä¾‹çš„æœ€é«˜ n æ¯”ç‰¹ã€‚</li><li><code>def lsb(n: Int = 1): UInt</code><br>è¿”å›å½“å‰ä¿¡å·å®ä¾‹çš„æœ€ä½ n æ¯”ç‰¹ã€‚</li><li><code>def msb: Bool</code><br>è¿”å›å½“å‰ä¿¡å·å®ä¾‹çš„æœ€é«˜ 1 æ¯”ç‰¹ï¼Œæ³¨æ„è¿”å›ç±»å‹ä¸º <code>Bool</code>ï¼Œä¸ <code>msb()</code> ä¸åŒã€‚</li><li><code>def lsb: Bool</code><br>è¿”å›å½“å‰ä¿¡å·å®ä¾‹çš„æœ€é«˜ 1 æ¯”ç‰¹ï¼Œæ³¨æ„è¿”å›ç±»å‹ä¸º <code>Bool</code>ï¼Œä¸ <code>lsb()</code> ä¸åŒã€‚</li></ul><h3 id="setAll-clearAll-setAllTo-â€”-å°†ä¿¡å·çš„æ‰€æœ‰æ¯”ç‰¹èµ‹-1-æˆ–-0"><a href="#setAll-clearAll-setAllTo-â€”-å°†ä¿¡å·çš„æ‰€æœ‰æ¯”ç‰¹èµ‹-1-æˆ–-0" class="headerlink" title="setAll&#x2F;clearAll&#x2F;setAllTo â€” å°†ä¿¡å·çš„æ‰€æœ‰æ¯”ç‰¹èµ‹ 1 æˆ– 0"></a><code>setAll</code>&#x2F;<code>clearAll</code>&#x2F;<code>setAllTo</code> â€” å°†ä¿¡å·çš„æ‰€æœ‰æ¯”ç‰¹èµ‹ 1 æˆ– 0</h3><p>å°†ä¸€ä¸ªä¿¡å·çš„æ‰€æœ‰æ¯”ç‰¹èµ‹ 1 æˆ– 0 æ˜¯ä¸€ä¸ªå¾ˆæ™®éçš„éœ€æ±‚ï¼ŒSystemVerilog ä¸­å¼•å…¥äº†ä¸“é—¨çš„è¯­æ³•ï¼š</p><figure class="highlight plaintext"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assign allOnes = &#x27;1;</span><br><span class="line">assign allZeros = &#x27;0;</span><br></pre></td></tr></table></figure><p>Chisel ä¸­èµ‹å…¨ 0 æ˜¯å®¹æ˜“å®ç°çš„ï¼ˆ<code>x := 0.U</code>ï¼‰ï¼Œä½†èµ‹å…¨ 1 ç¼ºä¹ä¼˜é›…æ˜“è¯»çš„å®ç°æ–¹æ³•ã€‚å¸¸è§çš„å†™æ³•åŒ…æ‹¬ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x1 := <span class="type">Fill</span>(x1.getWidth, b).asTypeOf(x1)</span><br><span class="line">x2 := ~ <span class="number">0.</span><span class="type">U</span> <span class="comment">// ~ 0.S if SInt</span></span><br></pre></td></tr></table></figure><p>æ— è®ºå¦‚ä½•ï¼Œéƒ½å¾ˆä¸ç›´è§‚ã€‚ç‰¹åˆ«æ˜¯å¦‚æœæˆ‘å¸Œæœ›å°†æ‰€æœ‰æ¯”ç‰¹èµ‹å€¼ä¸ºæŸä¸ª <code>Bool</code> ä¿¡å·æˆ–æŸä¸ª Scala <code>Boolean</code> å˜é‡è¾“å‡ºæ—¶ï¼Œä»£ç ä¼šå˜å¾—æ›´åŠ éš¾ä»¥é˜…è¯»ã€‚</p><p>å› æ­¤ï¼ŒChipmunk æä¾›äº† <code>setAll</code>&#x2F;<code>clearAll</code>&#x2F;<code>setAllTo</code> ç­‰ä¸€ç³»åˆ—æ–¹æ³•ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>def setAllTo(b: Bool): T</code><br>å°†ä¿¡å·çš„æ¯ä¸ªæ¯”ç‰¹éƒ½èµ‹å€¼ä¸º bï¼Œå¹¶è¿”å›è¯¥ä¿¡å·ã€‚</li><li><code>def setAllTo(b: Boolean): T</code><br>å°†ä¿¡å·çš„æ¯ä¸ªæ¯”ç‰¹éƒ½èµ‹å€¼ä¸º b çš„ <code>Bool</code> å­—é¢é‡ï¼ˆå³<code>b.B</code>ï¼‰ï¼Œå¹¶è¿”å›è¯¥ä¿¡å·ã€‚</li><li><code>def setAll(): T</code><br>å°†ä¿¡å·çš„æ¯ä¸ªæ¯”ç‰¹éƒ½èµ‹å€¼ä¸º <code>true.B</code>ï¼Œå¹¶è¿”å›è¯¥ä¿¡å·ã€‚</li><li><code>def clearAll(): T</code><br>å°†ä¿¡å·çš„æ¯ä¸ªæ¯”ç‰¹éƒ½èµ‹å€¼ä¸º <code>false.B</code>ï¼Œå¹¶è¿”å›è¯¥ä¿¡å·ã€‚</li></ul><h3 id="isOneHot-â€”-åˆ¤æ–­å½“å‰ä¿¡å·æ˜¯å¦ä¸ºç‹¬çƒ­ç ï¼ˆone-hotï¼‰"><a href="#isOneHot-â€”-åˆ¤æ–­å½“å‰ä¿¡å·æ˜¯å¦ä¸ºç‹¬çƒ­ç ï¼ˆone-hotï¼‰" class="headerlink" title="isOneHot â€” åˆ¤æ–­å½“å‰ä¿¡å·æ˜¯å¦ä¸ºç‹¬çƒ­ç ï¼ˆone-hotï¼‰"></a><code>isOneHot</code> â€” åˆ¤æ–­å½“å‰ä¿¡å·æ˜¯å¦ä¸ºç‹¬çƒ­ç ï¼ˆone-hotï¼‰</h3><p>å¦‚æ–¹æ³•åçš„å­—é¢æ„æ€ï¼Œåˆ¤æ–­å½“å‰ä¿¡å·æ˜¯å¦ä¸ºç‹¬çƒ­ç ã€‚è‹¥æ˜¯åˆ™è¾“å‡º <code>true.B</code>ï¼Œåä¹‹åˆ™è¾“å‡º <code>false.B</code>ã€‚</p><h2 id="chisel3-Data-çš„é¢å¤–æ–¹æ³•"><a href="#chisel3-Data-çš„é¢å¤–æ–¹æ³•" class="headerlink" title="chisel3.Data çš„é¢å¤–æ–¹æ³•"></a><code>chisel3.Data</code> çš„é¢å¤–æ–¹æ³•</h2><p><code>chisel3.Data</code> æ˜¯ Chisel çš„å„ç¡¬ä»¶ç±»å‹çš„çˆ¶ç±»ã€‚</p><p>è¿™äº›æ–¹æ³•æ˜¯åœ¨ <code>chipmunk.AddMethodsToData</code> è¿™ä¸ªéšå¼ç±»ä¸­å®ç°çš„ã€‚</p><h3 id="dontTouch-â€”-dontTouch-çš„è¯­æ³•ç³–"><a href="#dontTouch-â€”-dontTouch-çš„è¯­æ³•ç³–" class="headerlink" title="dontTouch â€” dontTouch() çš„è¯­æ³•ç³–"></a><code>dontTouch</code> â€” <code>dontTouch()</code> çš„è¯­æ³•ç³–</h3><p><code>chisel3.dontTouch</code> å¯ä»¥é˜»æ­¢ Chisel å¯¹è¯¥ä¿¡å·è¿›è¡Œä¼˜åŒ–ï¼Œå¸¸ç”¨äºä¿ç•™æŸä¸­é—´ä¿¡å·çš„å‘½åã€ä¿ç•™ä¸æ¨¡å—è¾“å‡ºæ— å…³çš„ç”µè·¯ç­‰ã€‚è¿™æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œä¸‹é¢æ˜¯ Chisel æä¾›çš„ä¸€ä¸ªç”¨æ³•ç­‰ä¾‹å­ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModule</span> <span class="keyword">extends</span> <span class="title">Module</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> io = <span class="type">IO</span>(<span class="keyword">new</span> <span class="type">Bundle</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="type">Input</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">    <span class="keyword">val</span> b = <span class="type">Output</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">  io.b := io.a</span><br><span class="line">  <span class="keyword">val</span> dead = <span class="type">RegNext</span>(io.a +% <span class="number">1.</span><span class="type">U</span>) <span class="comment">// normally dead would be pruned by DCE</span></span><br><span class="line">  dontTouch(dead) <span class="comment">// Marking it as such will preserve it</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Chipmunk æä¾›äº†ä¸€ä¸ªæ–¹æ³•ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ Data ç±»å‹çš„ dontTouch æ–¹æ³•å®ç°åŒæ ·çš„æ•ˆæœï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¤šçš„ç¼–ç é€‰æ‹©ã€‚å› æ­¤ï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼Œåœ¨æœ‰çš„æ—¶å€™è¿™å¯ä»¥èŠ‚çœä»£ç é‡ã€‚</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModule</span> <span class="keyword">extends</span> <span class="title">Module</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> io = <span class="type">IO</span>(<span class="keyword">new</span> <span class="type">Bundle</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="type">Input</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">    <span class="keyword">val</span> b = <span class="type">Output</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">  io.b := io.a</span><br><span class="line">  <span class="keyword">val</span> dead = <span class="type">RegNext</span>(io.a +% <span class="number">1.</span><span class="type">U</span>).dontTouch</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="See-Also"><a href="#See-Also" class="headerlink" title="See Also"></a>See Also</h2><ul><li><a href="https://github.com/zhutmost/chipmunk">Chipmunk Github</a></li></ul><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com" target="_blank" rel="noopener noreferrer" title="Unsplash"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">photoed by Annegret Kammer</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;chipmunk&lt;/code&gt; ä¸º Chisel çš„åŸç”Ÿç±»å‹ &lt;code&gt;Bits&lt;/code&gt;&amp;#x2F;&lt;code&gt;Data&lt;/code&gt; ç­‰å¢åŠ äº†è‹¥å¹²é¢å¤–çš„æ–¹æ³•ï¼ˆä¸»è¦æ˜¯è¯­æ³•ç³–ï¼‰ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›æ›´åŠ ä¾¿æ·çš„ç¼–ç é€‰æ‹©ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Engineering" scheme="https://zhutmost.com/categories/Engineering/"/>
    
    
    <category term="Chisel" scheme="https://zhutmost.com/tags/Chisel/"/>
    
    <category term="Chipmunk" scheme="https://zhutmost.com/tags/Chipmunk/"/>
    
  </entry>
  
  <entry>
    <title>ğŸ¿ï¸ Chipmunk - ä¸‹é™æ²¿è§¦å‘å¯„å­˜å™¨ RegNeg</title>
    <link href="https://zhutmost.com/Engineering/chipmunk-regneg/"/>
    <id>https://zhutmost.com/Engineering/chipmunk-regneg/</id>
    <published>2023-06-02T15:12:02.048Z</published>
    <updated>2023-08-16T11:31:13.704Z</updated>
    
    <content type="html"><![CDATA[<p><code>chipmunk</code> æä¾›äº†åœ¨æ—¶é’Ÿè´Ÿæ²¿è§¦å‘çš„å¯„å­˜å™¨ <code>RegNegNext</code> å’Œ <code>RegNegEnable</code>ã€‚å®ƒä»¬å…·æœ‰å’Œ<code>chisel3.RegNext</code>ã€<code>chisel3.util.RegEnable</code> ç±»ä¼¼çš„æ¥å£ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å…¶åœ¨æ—¶é’Ÿçš„ä¸‹é™æ²¿ï¼ˆè€Œä¸æ˜¯ä¸Šå‡æ²¿ï¼‰å®Œæˆæ•°æ®é”å­˜ã€‚</p><span id="more"></span><h2 id="Whyï¼Ÿ"><a href="#Whyï¼Ÿ" class="headerlink" title="Whyï¼Ÿ"></a>Whyï¼Ÿ</h2><p>Chisel å·²ç»æä¾›äº†ä¸€ç³»åˆ—çš„æ—¶é’Ÿä¸Šå‡æ²¿è§¦å‘çš„å¯„å­˜å™¨ï¼ŒåŒ…æ‹¬ <code>RegInit</code>ã€<code>RegNext</code>ã€<code>RegEnable</code> ç­‰ã€‚æœ‰äº›åœºåˆä¸‹æˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€äº›æ—¶é’Ÿä¸‹é™æ²¿é‡‡æ ·çš„å¯„å­˜å™¨ï¼Œä½†ç°é˜¶æ®µåœ¨ Chisel ä¸­æˆ‘ä»¬åªèƒ½é‡‡ç”¨ BlackBox çš„æ–¹æ³•å®ç°ã€‚</p><p>å…³äº Chisel æ˜¯å¦åº”è¯¥æ·»åŠ å¯¹æ—¶é’Ÿä¸‹é™æ²¿è§¦å‘å¯„å­˜å™¨çš„åŸç”Ÿæ”¯æŒï¼Œç¤¾åŒºåœ¨ FIRRTL æ—¶ä»£å°±è¿›è¡Œè¿‡ä¸€äº›è®¨è®ºï¼ˆå¦‚ <a href="https://github.com/chipsalliance/firrtl/issues/695">#695</a>ï¼‰ã€‚å°½ç®¡ Chisel ç°åœ¨çš„åç«¯ CIRCT Firtool æ˜¯æ”¯æŒç”Ÿæˆ <code>negedge clock</code> ç”µè·¯çš„ï¼Œä½†ç›®å‰ Chisel å‰ç«¯è¿˜æ²¡æœ‰å¯¹åº”çš„ç»“æ„ã€‚</p><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p><code>chipmunk</code> æä¾›äº†å››ç§ä¸åŒç­¾åçš„ä¸‹é™æ²¿è§¦å‘å¯„å­˜å™¨ï¼š</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RegNegNext</span>(next: <span class="type">T</span>)</span><br><span class="line"><span class="type">RegNegNext</span>(next: <span class="type">T</span>, init: <span class="type">T</span>, isResetAsync: <span class="type">Boolean</span> = <span class="literal">true</span>)</span><br><span class="line"><span class="type">RegNegEnable</span>(next: <span class="type">T</span>, enable: <span class="type">Bool</span>)</span><br><span class="line"><span class="type">RegNegEnable</span>(next: <span class="type">T</span>, init: <span class="type">T</span>, enable: <span class="type">Bool</span>, isResetAsync: <span class="type">Boolean</span> = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>å®ƒä»¬çš„å‚æ•°åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li><code>next</code>ï¼šå¾…é”å­˜çš„è¾“å…¥æ•°æ®ï¼Œä¼šåœ¨æ—¶é’Ÿçš„ä¸‹é™æ²¿è¢«é‡‡æ ·ã€‚</li><li><code>init</code>ï¼šå¤ä½åˆå§‹æ•°æ®ï¼›éœ€è¦ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨å¤ä½ä¿¡å·ã€‚</li><li><code>enable</code>ï¼šé”å­˜ä½¿èƒ½ä¿¡å·ï¼Œå½“å®ƒä¸º<code>true.B</code>æ—¶<code>next</code>ä¼šè¢«é”å­˜ã€‚</li><li><code>isResetAsync</code>ï¼šå¤ä½ä¿¡å·æ˜¯å¦ä¸ºå¼‚æ­¥å¤ä½ï¼ˆ<code>AsyncReset</code>ï¼‰ï¼›é»˜è®¤ä¸º<code>true</code>ã€‚</li></ul><p>ç”¨æˆ·ä¸éœ€è¦åœ¨å‚æ•°åˆ—è¡¨ä¸­ç»™å®šæ—¶é’Ÿå’Œå¤ä½ä¿¡å·ï¼Œå’Œ Chisel çš„ <code>RegXXX</code> ä¸€æ ·ï¼Œå®ƒä»¬ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ä½¿ç”¨å¯¹åº”çš„æ—¶é’Ÿå’Œå¤ä½ä¿¡å·ã€‚</p><p>å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯å‚æ•°<code>isResetAsync</code>ã€‚ç”±äº Chisel çš„ç±»å‹ç³»ç»Ÿé™åˆ¶ï¼ŒåŒæ­¥å¤ä½å’Œå¼‚æ­¥å¤ä½çš„ç±»å‹éƒ½æ˜¯<code>ResetType</code>ï¼ˆé™¤éæ˜¾å¼å£°æ˜ä¸º<code>AsyncReset()</code>ï¼Œä½†è¿™ç§æƒ…å†µä¸å¸¸è§ï¼‰ï¼ŒChisel ä¼šåœ¨ Elaboration é˜¶æ®µå†æ¨å¯¼å†³å®šå®ƒä»¬å±äºå“ªç§ç±»å‹çš„å¤ä½ä¿¡å·å¹¶èµ‹äºˆå¯¹åº”çš„ç±»å‹ï¼š<code>Bool</code> æˆ– <code>AsyncReset</code>ã€‚Chisel æ²¡æœ‰æä¾›å…¬å¼€ API åˆ¤æ–­å¤ä½ç±»å‹ï¼Œå› æ­¤éœ€è¦ç”¨æˆ·é€šè¿‡è®¾ç½® <code>isResetAsync</code> å‘Šè¯‰ <code>RegNeg</code> æœ€ç»ˆä½¿ç”¨å“ªç§å¤ä½ã€‚</p><!-- å¦‚æœç”¨æˆ·çš„è®¾ç½®ä¸å®é™… Chisel æ¨å¯¼å‡ºçš„å¤ä½ç±»å‹ä¸ç¬¦ï¼Œåç«¯ä»£ç ç”Ÿæˆé˜¶æ®µ Firtool ä¼šæŠ¥é”™ã€‚ --><p>ä¸‹é¢ç»™å‡ºä¸€äº›å®é™…ç”¨ä¾‹ä¾›å‚è€ƒã€‚</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> nextVal0 = <span class="type">Wire</span>(<span class="type">Vec</span>(<span class="number">8</span>, <span class="type">UInt</span>(<span class="number">3.</span><span class="type">W</span>)))</span><br><span class="line"><span class="keyword">val</span> nextVal1 = <span class="type">Wire</span>(<span class="type">SInt</span>(<span class="number">3.</span><span class="type">W</span>))</span><br><span class="line"><span class="keyword">val</span> enable1 = <span class="type">Wire</span>(<span class="type">Bool</span>())</span><br><span class="line"></span><br><span class="line">withClockAndReset(clock, reset) &#123;</span><br><span class="line">  <span class="keyword">val</span> r0 = <span class="type">RegNegNext</span>(io.nextVal0, init = <span class="type">VecInit</span>(<span class="type">Seq</span>.fill(<span class="number">8</span>)(<span class="number">1.</span><span class="type">U</span>(<span class="number">3.</span><span class="type">W</span>))))</span><br><span class="line">  <span class="keyword">val</span> r1 = <span class="type">RegNegEnable</span>(io.nextVal1, <span class="number">-3.</span><span class="type">S</span>, io.enable1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="See-Also"><a href="#See-Also" class="headerlink" title="See Also"></a>See Also</h2><ul><li><a href="https://github.com/zhutmost/chipmunk">Chipmunk Github</a></li></ul><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com" target="_blank" rel="noopener noreferrer" title="Unsplash"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">photoed by Annegret Kammer</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;chipmunk&lt;/code&gt; æä¾›äº†åœ¨æ—¶é’Ÿè´Ÿæ²¿è§¦å‘çš„å¯„å­˜å™¨ &lt;code&gt;RegNegNext&lt;/code&gt; å’Œ &lt;code&gt;RegNegEnable&lt;/code&gt;ã€‚å®ƒä»¬å…·æœ‰å’Œ&lt;code&gt;chisel3.RegNext&lt;/code&gt;ã€&lt;code&gt;chisel3.util.RegEnable&lt;/code&gt; ç±»ä¼¼çš„æ¥å£ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å…¶åœ¨æ—¶é’Ÿçš„ä¸‹é™æ²¿ï¼ˆè€Œä¸æ˜¯ä¸Šå‡æ²¿ï¼‰å®Œæˆæ•°æ®é”å­˜ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Engineering" scheme="https://zhutmost.com/categories/Engineering/"/>
    
    
    <category term="Chisel" scheme="https://zhutmost.com/tags/Chisel/"/>
    
    <category term="Chipmunk" scheme="https://zhutmost.com/tags/Chipmunk/"/>
    
  </entry>
  
  <entry>
    <title>ğŸ¿ï¸ Chipmunk - ç”¨ Master/Slave å®šä¹‰ Bundle æ–¹å‘</title>
    <link href="https://zhutmost.com/Engineering/chipmunk-master-slave/"/>
    <id>https://zhutmost.com/Engineering/chipmunk-master-slave/</id>
    <published>2023-04-20T16:28:02.000Z</published>
    <updated>2023-08-16T11:32:12.001Z</updated>
    
    <content type="html"><![CDATA[<p><code>chipmunk.IsMasterSlave</code> ä½¿ç”¨æˆ·åœ¨å®šä¹‰ <code>Bundle</code> æ—¶å¯åŒæ—¶è§„å®šå…¶å±äºæ•°æ®çš„ç”Ÿäº§è€…ï¼ˆMasterï¼‰æˆ–æ¶ˆè´¹è€…ï¼ˆSlaveï¼‰ã€‚å½“ä»¥ <code>Master()</code> å®šä¹‰çš„ <code>Bundle</code> è¢«ä»¥ <code>Slave()</code> å½¢å¼ä¾‹åŒ–æ—¶ï¼Œå†…éƒ¨ä¿¡å·çš„æ–¹å‘ä¼šè‡ªåŠ¨ç¿»è½¬ï¼Œåä¹‹äº¦ç„¶ã€‚</p><span id="more"></span><h2 id="Whyï¼Ÿ"><a href="#Whyï¼Ÿ" class="headerlink" title="Whyï¼Ÿ"></a>Whyï¼Ÿ</h2><p><code>chisel3.Bundle</code> åœ¨ä¾‹åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>Flipped()</code> ç¿»è½¬å…¶å†…éƒ¨ä¿¡å·çš„æ–¹å‘ã€‚åœ¨è®¸å¤šChiselé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬çº¦å®š <code>Bundle</code> ä½œä¸ºæ¨¡å—ç«¯å£æ—¶é»˜è®¤æ˜¯ç”Ÿäº§è€…ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›å®ƒä½œä¸ºæ¶ˆè´¹è€…ï¼Œåˆ™æ˜¾å¼åœ°ç”¨ <code>Flipped()</code> æŠŠå®ƒåŒ…è£¹èµ·æ¥ã€‚ç„¶è€Œï¼Œå¾ˆå¤šç”¨æˆ·å¹¶ä¸æ€»æ˜¯éµå®ˆè¿™ä¸€çº¦å®šï¼Œæ‰€ä»¥ç”¨æˆ·ç»å¸¸æä¸æ¸…æ¥šç«¯å£éœ€ä¸éœ€è¦ç”¨ <code>Flipped()</code> åŒ…è£¹èµ·æ¥ã€‚å®è·µä¸­ï¼Œå¯¹äºåˆ«äººä»£ç ä¸­çš„æ¨¡å—æ¥å£ï¼Œé€šå¸¸éœ€è¦é˜…è¯»å…¶ä»£ç å’Œæ–‡æ¡£æ‰èƒ½åˆ¤æ–­è¿™äº› <code>Bundle</code> å±äº Master è¿˜æ˜¯ Slaveï¼ˆæ˜¯å¦éœ€è¦ç¿»è½¬å…¶æ–¹å‘ï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç ç‰‡æ®µä¸­çš„ SRAM è¯»å†™æ¥å£ <code>SramReadWriteIO</code> çœ‹èµ·æ¥éå¸¸åˆç†ï¼Œä½†æ ¹æ®ä¸Šè¿°çº¦å®šï¼Œè¿™ä¸€æ¥å£æ—¢ç„¶å±äºSlaveï¼Œå…¶å†…éƒ¨ä¿¡å·æ–¹å‘åº”è¯¥åè¿‡æ¥å®šä¹‰ï¼ˆæ¯”å¦‚ <code>enable</code> åº”å½“æ˜¯ <code>Output()</code>ï¼‰ã€‚ä¸éµå®ˆçº¦å®šçš„ç»“æœï¼Œå°±æ˜¯å…¶ä»–ç”¨æˆ·åœ¨è°ƒç”¨è¿™ä¸€ <code>Bundle</code> çš„çš„æ—¶å€™ç»å¸¸ä¼šé™·å…¥å›°æƒ‘ï¼šæˆ‘åº”ä¸åº”è¯¥å¥—ä¸Š <code>Flipped()</code>ï¼Ÿ</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SramReadWriteIO</span> <span class="keyword">extends</span> <span class="title">Bundle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> enable  = <span class="type">Input</span>(<span class="type">Bool</span>())</span><br><span class="line">  <span class="keyword">val</span> read    = <span class="type">Input</span>(<span class="type">Bool</span>())</span><br><span class="line">  <span class="keyword">val</span> addr    = <span class="type">Input</span>(<span class="type">UInt</span>(<span class="number">16.</span><span class="type">W</span>))</span><br><span class="line">  <span class="keyword">val</span> dataIn  = <span class="type">Input</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">  <span class="keyword">val</span> dataOut = <span class="type">Output</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p><code>chipmunk.IsMasterSlave</code> æ˜¯ä¸€ä¸ªç‰¹è´¨ï¼Œç”¨æˆ·åœ¨å®šä¹‰ <code>Bundle</code> æ—¶å¯ä»¥é€‰æ‹©æ··å…¥è¿™ä¸€ç‰¹è´¨ã€‚å®ƒè¦æ±‚é¢å¤–å®šä¹‰ä¸€æ–¹æ³• <code>def isMaster: Boolean</code>ï¼Œ<code>true</code> è¡¨ç¤ºè¯¥ <code>Bundle</code> å½“å‰çš„ä¿¡å·æ–¹å‘å±äº Masterï¼Œåä¹‹å±äº Slaveã€‚</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SramWriteIO</span> <span class="keyword">extends</span> <span class="title">Bundle</span> <span class="keyword">with</span> <span class="title">IsMasterSlave</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> enable  = <span class="type">Input</span>(<span class="type">Bool</span>())</span><br><span class="line">  <span class="keyword">val</span> addr    = <span class="type">Input</span>(<span class="type">UInt</span>(<span class="number">16.</span><span class="type">W</span>))</span><br><span class="line">  <span class="keyword">val</span> dataIn  = <span class="type">Input</span>(<span class="type">UInt</span>(<span class="number">32.</span><span class="type">W</span>))</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">isMaster</span> </span>= <span class="literal">false</span> <span class="comment">// This is a Slave Bundle</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ä¸€æ¥ï¼Œåœ¨ä¾‹åŒ–å®ƒæ—¶ï¼Œç”¨æˆ·å¯ä»¥ç”¨ <code>Master()</code> æˆ– <code>Slave()</code> æ¥é€‰æ‹©å®ƒå†…éƒ¨ä¿¡å·çš„æ–¹å‘ã€‚å¯¹äºä¸€ä¸ªå¥—ä¸Š <code>Slave()</code> çš„ Master <code>Bundle</code>ï¼Œå…¶å†…éƒ¨ä¿¡å·æ–¹å‘ä¼šç›¸åº”å–åã€‚ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒä½•æ—¶éœ€è¦ <code>Flipped</code>ï¼Œåªéœ€è¦è®°ä½è¿™ä¸€ <code>Bundle</code> åœ¨å½“å‰æ¨¡å—çš„æ•°æ®ä¼ è¾“å…³ç³»ã€‚</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sram</span> <span class="keyword">extends</span> <span class="title">Module</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> io = <span class="keyword">new</span> <span class="type">Bundle</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> rw = <span class="type">Slave</span>(<span class="keyword">new</span> <span class="type">SramReadWriteIO</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œ<code>Master</code>&#x2F;<code>Slave</code> è¿˜æ”¯æŒåµŒå¥—ä½¿ç”¨ï¼Œä»è€Œå…è®¸ç”¨æˆ·æ„é€ å‡ºå¦‚ä¸‹ AMBA AXI æ€»çº¿è¿™æ ·çš„å¤æ‚ä¾‹å­ã€‚</p><figure class="highlight scala"><figcaption><span>Code Snippet</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AxiIO</span> <span class="keyword">extends</span> <span class="title">Bundle</span> <span class="keyword">with</span> <span class="title">IsMasterSlave</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> aw = <span class="type">Master</span>(<span class="keyword">new</span> <span class="type">AxiWriteAddrChannelIO</span>)</span><br><span class="line">  <span class="keyword">val</span> ar = <span class="type">Master</span>(<span class="keyword">new</span> <span class="type">AxiReadAddrChannelIO</span>)</span><br><span class="line">  <span class="keyword">val</span> r = <span class="type">Slave</span>(<span class="keyword">new</span> <span class="type">AxiReadDataChannelIO</span>)</span><br><span class="line">  <span class="keyword">val</span> w = <span class="type">Master</span>(<span class="keyword">new</span> <span class="type">AxiWriteDataChannelIO</span>)</span><br><span class="line">  <span class="keyword">val</span> b = <span class="type">Slave</span>(<span class="keyword">new</span> <span class="type">AxiWriteRespChannelIO</span>)</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">isMaster</span> </span>= <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AxiSlave</span> <span class="keyword">extends</span> <span class="title">Module</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> io = <span class="type">IO</span>(<span class="keyword">new</span> <span class="type">Bundle</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> axi = <span class="type">Slave</span>(<span class="keyword">new</span> <span class="type">AxiIO</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="See-Also"><a href="#See-Also" class="headerlink" title="See Also"></a>See Also</h2><ul><li><a href="https://github.com/zhutmost/chipmunk">Chipmunk Github</a></li></ul><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com" target="_blank" rel="noopener noreferrer" title="Unsplash"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">photoed by Annegret Kammer</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;chipmunk.IsMasterSlave&lt;/code&gt; ä½¿ç”¨æˆ·åœ¨å®šä¹‰ &lt;code&gt;Bundle&lt;/code&gt; æ—¶å¯åŒæ—¶è§„å®šå…¶å±äºæ•°æ®çš„ç”Ÿäº§è€…ï¼ˆMasterï¼‰æˆ–æ¶ˆè´¹è€…ï¼ˆSlaveï¼‰ã€‚å½“ä»¥ &lt;code&gt;Master()&lt;/code&gt; å®šä¹‰çš„ &lt;code&gt;Bundle&lt;/code&gt; è¢«ä»¥ &lt;code&gt;Slave()&lt;/code&gt; å½¢å¼ä¾‹åŒ–æ—¶ï¼Œå†…éƒ¨ä¿¡å·çš„æ–¹å‘ä¼šè‡ªåŠ¨ç¿»è½¬ï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Engineering" scheme="https://zhutmost.com/categories/Engineering/"/>
    
    
    <category term="Chisel" scheme="https://zhutmost.com/tags/Chisel/"/>
    
    <category term="Chipmunk" scheme="https://zhutmost.com/tags/Chipmunk/"/>
    
  </entry>
  
  <entry>
    <title>2023å¹´æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸä¼šè®®æ¦‚è§ˆ</title>
    <link href="https://zhutmost.com/Research/asic-conf-ddl-2023/"/>
    <id>https://zhutmost.com/Research/asic-conf-ddl-2023/</id>
    <published>2022-11-13T06:31:19.000Z</published>
    <updated>2023-08-14T12:21:48.062Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†å‡†ç¡®æŠŠæ¡æ¯ä¸€ä¸ªå­¦æœ¯äº¤æµï¼ˆæ‘¸é±¼ï¼‰çš„æœºä¼šï¼Œæœ¬æ–‡æ”¶é›†äº†æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸï¼ˆå›ºæ€ç”µè·¯ã€ä½“ç³»ç»“æ„ç­‰ï¼‰çš„ç›¸å…³å­¦æœ¯ä¼šè®®çš„æŠ•ç¨¿ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¬å¼€æ—¶é—´ã€åœ°ç‚¹ã€æˆªç¨¿æ—¶é—´ç­‰ã€‚<del>ä¹‹åï¼Œæˆ‘å°†å°½é‡ä¿æŒæœ¬æ–‡æŒç»­æ›´æ–°ã€‚</del></p><span id="more"></span><p>ç”±äºå¤šæ•°ä¼šè®®çš„æŠ•ç¨¿æˆªç¨¿æ—¶é—´éƒ½ä¼šå»¶æœŸä¸€è‡³ä¸¤å‘¨ï¼Œå› æ­¤ä¸‹è¡¨ä¸­çš„æˆªç¨¿æ—¶é—´é€šå¸¸åªæ˜¯ä¸ªå¤§çº¦æ—¶é—´ã€‚</p><h2 id="å›ºæ€ç”µè·¯"><a href="#å›ºæ€ç”µè·¯" class="headerlink" title="å›ºæ€ç”µè·¯"></a>å›ºæ€ç”µè·¯</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">ISSCCâ€™23</td><td>San Francisco, CA, US</td><td>2023.02.19</td><td>2022.09.07</td><td><a href="https://www.isscc.org/">Link</a></td></tr><tr><td align="center">VLSIâ€™23</td><td>Kyoto, Japan</td><td>2023.06.11</td><td>2023.02.01</td><td><a href="https://www.vlsisymposium.org/">Link</a></td></tr><tr><td align="center">ESSCIRCâ€™23</td><td>Lisbon, Portugal</td><td>2023.09.11</td><td>2023.04.14</td><td><a href="https://www.esscirc-essderc2023.org/">Link</a></td></tr><tr><td align="center">ASSCCâ€™23</td><td>Haikou, China</td><td>2023.11.05</td><td>2023.06.05</td><td><a href="https://www.a-sscc2023.com/">Link</a></td></tr><tr><td align="center">CICCâ€™23</td><td>San Antonio, TX, US</td><td>2023.04.23</td><td>2022.11.14</td><td><a href="https://www.ieee-cicc.org/">Link</a></td></tr><tr><td align="center">HOTCHIPSâ€™23</td><td>San Francisco, CA, US</td><td>2023.08.27</td><td>2023.03.22</td><td><a href="https://hotchips.org/">Link</a></td></tr></tbody></table><h2 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">ISCAâ€™23</td><td>Orlando, FL, USA</td><td>2023.06.17</td><td>2022.11.14</td><td><a href="https://iscaconf.org/isca2023/">Link</a></td></tr><tr><td align="center">MICROâ€™23</td><td>Toronto, Canada</td><td>2023.10.28</td><td>2023.04.21</td><td><a href="https://microarch.org/micro56">Link</a></td></tr><tr><td align="center">HPCAâ€™23</td><td>Montreal, Canada</td><td>2023.02.25</td><td>2022.08.01</td><td><a href="https://hpca-conf.org/2023">Link</a></td></tr><tr><td align="center">DACâ€™23</td><td>San Francisco, CA, US</td><td>2023.07.09</td><td>2022.11.14</td><td><a href="https://www.dac.com/">Link</a></td></tr></tbody></table><h2 id="æœºå™¨è§†è§‰"><a href="#æœºå™¨è§†è§‰" class="headerlink" title="æœºå™¨è§†è§‰"></a>æœºå™¨è§†è§‰</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">CVPRâ€™23</td><td>Vancouver, Canada</td><td>2023.06.18</td><td>2022.11.04</td><td><a href="https://cvpr2023.thecvf.com/">Link</a></td></tr><tr><td align="center">IROSâ€™23</td><td>Detroit, MI, US</td><td>2023.10.01</td><td>2023.03.01</td><td><a href="https://ieee-iros.org/">Link</a></td></tr><tr><td align="center">ICRAâ€™23</td><td>London, UK</td><td>2023.05.29</td><td>2022.08.05</td><td><a href="https://www.icra2023.org/">Link</a></td></tr></tbody></table><h2 id="å…¶ä»–ä¼šè®®"><a href="#å…¶ä»–ä¼šè®®" class="headerlink" title="å…¶ä»–ä¼šè®®"></a>å…¶ä»–ä¼šè®®</h2><table><thead><tr><th align="center">ä¼šè®®</th><th>åœ°ç‚¹</th><th>å¬å¼€æ—¶é—´</th><th>æˆªç¨¿æ—¶é—´</th><th>ç½‘ç«™é“¾æ¥</th></tr></thead><tbody><tr><td align="center">ISCASâ€™23</td><td>Monterey, CA, US</td><td>2023.05.21</td><td>2022.11.07</td><td><a href="https://iscas2023.org/">Link</a></td></tr><tr><td align="center">AICASâ€™23</td><td>Hangzhou, China</td><td>2023.06.11</td><td>2023.02.03</td><td><a href="http://www.aicas2023.org/">Link</a></td></tr><tr><td align="center">APCCASâ€™23</td><td>Hyderabad, India</td><td>2023.11.20</td><td>2023.06.04</td><td><a href="https://www.apccas2023.org/">Link</a></td></tr><tr><td align="center">MWSCASâ€™23</td><td>Phoenix, AZ, US</td><td>2023.04.07</td><td>2022.08.06</td><td><a href="https://www.mwscas2023.org/">Link</a></td></tr><tr><td align="center">BioCASâ€™23</td><td>Toronta, Canada</td><td>2023.10.19</td><td>2023.06.09</td><td><a href="https://2023.ieee-biocas.org/">Link</a></td></tr><tr><td align="center">GLSVLSIâ€™23</td><td>Knoxville, TN, US</td><td>2023.06.05</td><td>2023.02.06</td><td><a href="https://www.glsvlsi.org/">Link</a></td></tr><tr><td align="center">ICCADâ€™23</td><td>San Francisco, CA, US</td><td>2023.10.29</td><td>2023.05.15</td><td><a href="https://iccad.com/">Link</a></td></tr><tr><td align="center">ASP-DACâ€™23</td><td>Tokyo, Japan</td><td>2023.01.16</td><td>2022.07.24</td><td><a href="https://www.aspdac.com/aspdac2023">Link</a></td></tr><tr><td align="center">DATEâ€™23</td><td>Antwerp, Belgium</td><td>2023.04.17</td><td>2022.09.18</td><td><a href="https://www.date-conference.com/">Link</a></td></tr><tr><td align="center">MLSysâ€™23</td><td>Southern FL, US</td><td>2023.06.04</td><td>2022.10.28</td><td><a href="https://mlsys.org/">Link</a></td></tr><tr><td align="center">FPGAâ€™23</td><td>Monterey, CA, US</td><td>2023.02.12</td><td>2022.09.23</td><td><a href="https://www.isfpga.org/">Link</a></td></tr><tr><td align="center">FPTâ€™23</td><td>Yokohama, Japan</td><td>2023.12.11</td><td>2023.07.14</td><td><a href="https://fpt2023.org/">Link</a></td></tr><tr><td align="center">FPLâ€™23</td><td>Gothenburg, Sweden</td><td>2023.09.04</td><td>2023.03.13</td><td><a href="https://2023.fpl.org/">Link</a></td></tr></tbody></table><p>ç¥å¤§å®¶æŠ•ç¨¿é¡ºåˆ©ï½</p><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/photos/SAQl58G-RYs" target="_blank" rel="noopener noreferrer" title="Harvest Fields in Westerham, Kent, 1880-1910 by Helen Allingham"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">photoed by Birmingham Museums</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸ºäº†å‡†ç¡®æŠŠæ¡æ¯ä¸€ä¸ªå­¦æœ¯äº¤æµï¼ˆæ‘¸é±¼ï¼‰çš„æœºä¼šï¼Œæœ¬æ–‡æ”¶é›†äº†æ™ºèƒ½èŠ¯ç‰‡é¢†åŸŸï¼ˆå›ºæ€ç”µè·¯ã€ä½“ç³»ç»“æ„ç­‰ï¼‰çš„ç›¸å…³å­¦æœ¯ä¼šè®®çš„æŠ•ç¨¿ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¬å¼€æ—¶é—´ã€åœ°ç‚¹ã€æˆªç¨¿æ—¶é—´ç­‰ã€‚&lt;del&gt;ä¹‹åï¼Œæˆ‘å°†å°½é‡ä¿æŒæœ¬æ–‡æŒç»­æ›´æ–°ã€‚&lt;/del&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Research" scheme="https://zhutmost.com/categories/Research/"/>
    
    
    <category term="Paper Lives Matter" scheme="https://zhutmost.com/tags/Paper-Lives-Matter/"/>
    
    <category term="AI Chip" scheme="https://zhutmost.com/tags/AI-Chip/"/>
    
  </entry>
  
  <entry>
    <title>SSH é€šè¿‡ 443 ç«¯å£è¿æ¥ GitHub</title>
    <link href="https://zhutmost.com/Engineering/github-ssh-443/"/>
    <id>https://zhutmost.com/Engineering/github-ssh-443/</id>
    <published>2022-07-30T04:00:00.000Z</published>
    <updated>2023-08-16T08:08:41.160Z</updated>
    
    <content type="html"><![CDATA[<p>GitHub æä¾›äº†ä¸¤ç§åè®®ä¾›ç”¨æˆ·ä½¿ç”¨ Git è¿æ¥â€”â€” SSH å’Œ HTTPSã€‚ç†è®ºä¸Šæˆ‘å¯ä»¥éšæ„é€‰æ‹©ä¸¤è€…ä¹‹ä¸€è¿æ¥åˆ°æˆ‘åœ¨ GitHub ä¸Šçš„ä»£ç ä»“åº“ï¼Œæ— è®ºæ˜¯å°†äº‘ç«¯çš„ä»“åº“ <code>clone</code> åˆ°æœ¬åœ°ï¼Œè¿˜æ˜¯å°†æœ¬åœ°çš„ä¿®æ”¹ <code>push</code> åˆ°äº‘ç«¯ã€‚ç„¶è€Œï¼Œå‡ºäºä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„åŸå› ï¼Œæˆ‘æ‰€åœ¨çš„åŠå…¬ç½‘ç»œç¯å¢ƒç¦æ­¢äº† 22 ç«¯å£ï¼Œè€Œ 22 ç«¯å£æ­£æ˜¯ GitHub æä¾› SSH è®¿é—®çš„ç«¯å£å·ã€‚å°½ç®¡å¯ä»¥æ¢ç”¨ HTTPS åè®®ï¼Œä½†æ— è®ºå¦‚ä½•å°†æˆ‘ç”µè„‘ä¸Šçš„æ‰€æœ‰ä»£ç ä»“åº“çš„ä¸Šæ¸¸éƒ½ä» <code>git@github.com:...</code> ä¿®æ”¹ç§° <code>https://github.com/...</code> ä»ç„¶æ˜¯ä¸€ä¸ªç¹é‡çš„ä½“åŠ›æ´»ã€‚</p><p>ä¸ºäº†ä¸€åŠ³æ°¸é€¸åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç†æƒ³çš„è§£å†³æ–¹å¼æ˜¯è®© Git çš„ SSH åè®®æ”¹ç”¨ 22 ä»¥å¤–çš„å…¶ä»–ç«¯å£è¿æ¥ GitHubã€‚</p><span id="more"></span><h2 id="SSH-è¿æ¥å¤±è´¥"><a href="#SSH-è¿æ¥å¤±è´¥" class="headerlink" title="SSH è¿æ¥å¤±è´¥"></a>SSH è¿æ¥å¤±è´¥</h2><p>æˆ‘ä»¬åœ¨ <code>clone</code> GitHub ä¸Šçš„ä»£ç ä»“åº“æ—¶ï¼Œå¯ä»¥çœ‹åˆ° GitHub æä¾›äº†ä¸¤ç§ä¸åŒçš„é“¾æ¥ï¼ˆä»¥æˆ‘çš„ SpinalHDL æ¨¡ç‰ˆä»“åº“ä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zhutmost/spinalhdl-template.git <span class="comment"># HTTPS</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:zhutmost/spinalhdl-template.git <span class="comment"># SSH</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬ä¸€ç§æ–¹å¼ï¼Œå³ HTTPS åè®®ï¼Œä¸€èˆ¬æ€»èƒ½å¯ä»¥å·¥ä½œï¼ˆåªè¦èƒ½åœ¨æµè§ˆå™¨é‡Œæ‰“å¼€ GitHubï¼‰ï¼Œè€Œåè€…ä¾èµ– SSH çš„æ­£å¸¸å·¥ä½œã€‚å› ä¸ºæˆ‘çš„ç½‘ç»œç¯å¢ƒé˜»æ–­äº† 22 ç«¯å£çš„è¿æ¥ï¼Œæ‰€ä»¥æˆ‘æµ‹è¯• GitHub çš„ SSH è¿æ¥æ—¶ä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ ssh -T git@github.com</span><br><span class="line">kex_exchange_identification: Connection closed by remote host</span><br><span class="line">Connection closed by xx.xx.xx.xx port 22</span><br></pre></td></tr></table></figure><p>è€Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸Šè¿°å‘½ä»¤åº”å½“è¾“å‡ºï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ ssh -T git@github.com</span><br><span class="line">Hi zhutmost! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure><h2 id="å¥‡å¦™çš„å†’åé¡¶æ›¿"><a href="#å¥‡å¦™çš„å†’åé¡¶æ›¿" class="headerlink" title="å¥‡å¦™çš„å†’åé¡¶æ›¿"></a>å¥‡å¦™çš„å†’åé¡¶æ›¿</h2><p>ä»”ç»†å‘æ˜<a href="https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port">GitHubçš„æ–‡æ¡£</a>ï¼Œå¯ä»¥å‘ç° GitHub åœ¨å¦ä¸€ä¸ªåŸŸåï¼ˆssh.github.comï¼‰ä¸Šæä¾›äº†ä¸€ä¸ª 443 ç«¯å£çš„ SSH æœåŠ¡ã€‚æ˜¾ç„¶ï¼Œé˜²ç«å¢™ä¸€èˆ¬ä¸ä¼šé˜»æ‹¦ 443 ç«¯å£ï¼ˆåªè¦èƒ½æµè§ˆ GitHub ç½‘ç«™å°±èƒ½è¿ä¸Šï¼‰ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ ssh -T -p 443 git@ssh.github.com</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è®©Gitä¹Ÿèƒ½é€šè¿‡ä¸Šè¿°ç«¯å£ç”¨ SSH è®¿é—® GitHubï¼Œæˆ‘ä»¬ä¸ºä¸Šè¿° SSH è¿æ¥æ–¹å¼è®¾ç½®ä¸€ä¸ªåˆ«åã€‚é¦–å…ˆæ‰¾åˆ°SSHçš„é…ç½®æ–‡ä»¶ï¼Œå®ƒçš„è·¯å¾„ä¸€èˆ¬æ˜¯<code>~/.ssh/config</code>ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨çš„è¯ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªã€‚ç„¶åï¼Œåœ¨å…¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><figcaption><span>ssh_config</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  HostName ssh.github.com</span><br><span class="line">  User git</span><br><span class="line">  Port 443</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>Host</code> æ˜¯åˆ«åï¼Œ<code>HostName</code> æ˜¯å®é™…çš„åŸŸååœ°å€ï¼Œ<code>Port</code> æ˜¯ç«¯å£å·ã€‚å› ä¸ºæˆ‘å¸Œæœ›å½“æˆ‘åœ¨ç”¨ SSH è¿æ¥ github.com æ—¶ï¼Œå®é™…è®¿é—®çš„æ˜¯ ssh.github.comï¼Œæ‰€ä»¥ <code>Host</code> å’Œ <code>HostName</code> åˆ†åˆ«è®¾ç½®æˆè¿™ä¸¤ä¸ªåŸŸåï¼ˆæ³¨æ„ä¸è¦é¢ å€’é¡ºåºï¼‰ã€‚</p><p>å¦‚æ­¤ä¸€æ¥ï¼Œssh.github.com å°±æˆä¸ºäº† github.com çš„â€œå†’åé¡¶æ›¿â€è€…ã€‚å½“ Git é€šè¿‡ SSH åè®®è¯•å›¾è®¿é—® github.com çš„æ—¶å€™ï¼ŒSSH ä¼šå‘ç°å®ƒæ˜¯ ssh.github.com çš„åˆ«åï¼Œå› æ­¤ä¼šç”¨ 443 ç«¯å£å®é™…è¿æ¥åˆ°åè€…ã€‚è¿™æ ·ï¼Œå°±ç»•å¼€äº†æœ¬åœ°ç½‘è·¯ç¯å¢ƒå¯¹ 22 ç«¯å£çš„é™åˆ¶ã€‚</p><p>ï¼ˆæˆ‘ä¹‹æ‰€ä»¥ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œæ˜¯å› ä¸ºæˆ‘çš„ç½‘ç»œæƒ…å†µæ¯”è¾ƒå¤æ‚ã€‚å»ºè®®å…¬å¸çš„æœ‹å‹åœ¨ä½¿ç”¨æš—æ¸¡é™ˆä»“ä¹‹ç­–å‰ï¼Œå…ˆå’Œ IT éƒ¨é—¨ç¡®è®¤ä¸‹æ˜¯å¦åˆè§„ã€‚ï¼‰</p><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" href="https://besthqwallpapers.com/computers/github-wooden-logo-4k-wooden-backgrounds-social-networks-github-logo-178436" target="_blank" rel="noopener noreferrer" title="Wooden Github"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">Thumbnail by Besthqwallpapers</span></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;GitHub æä¾›äº†ä¸¤ç§åè®®ä¾›ç”¨æˆ·ä½¿ç”¨ Git è¿æ¥â€”â€” SSH å’Œ HTTPSã€‚ç†è®ºä¸Šæˆ‘å¯ä»¥éšæ„é€‰æ‹©ä¸¤è€…ä¹‹ä¸€è¿æ¥åˆ°æˆ‘åœ¨ GitHub ä¸Šçš„ä»£ç ä»“åº“ï¼Œæ— è®ºæ˜¯å°†äº‘ç«¯çš„ä»“åº“ &lt;code&gt;clone&lt;/code&gt; åˆ°æœ¬åœ°ï¼Œè¿˜æ˜¯å°†æœ¬åœ°çš„ä¿®æ”¹ &lt;code&gt;push&lt;/code&gt; åˆ°äº‘ç«¯ã€‚ç„¶è€Œï¼Œå‡ºäºä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„åŸå› ï¼Œæˆ‘æ‰€åœ¨çš„åŠå…¬ç½‘ç»œç¯å¢ƒç¦æ­¢äº† 22 ç«¯å£ï¼Œè€Œ 22 ç«¯å£æ­£æ˜¯ GitHub æä¾› SSH è®¿é—®çš„ç«¯å£å·ã€‚å°½ç®¡å¯ä»¥æ¢ç”¨ HTTPS åè®®ï¼Œä½†æ— è®ºå¦‚ä½•å°†æˆ‘ç”µè„‘ä¸Šçš„æ‰€æœ‰ä»£ç ä»“åº“çš„ä¸Šæ¸¸éƒ½ä» &lt;code&gt;git@github.com:...&lt;/code&gt; ä¿®æ”¹ç§° &lt;code&gt;https://github.com/...&lt;/code&gt; ä»ç„¶æ˜¯ä¸€ä¸ªç¹é‡çš„ä½“åŠ›æ´»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¸€åŠ³æ°¸é€¸åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç†æƒ³çš„è§£å†³æ–¹å¼æ˜¯è®© Git çš„ SSH åè®®æ”¹ç”¨ 22 ä»¥å¤–çš„å…¶ä»–ç«¯å£è¿æ¥ GitHubã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Engineering" scheme="https://zhutmost.com/categories/Engineering/"/>
    
    
    <category term="GitHub" scheme="https://zhutmost.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>EdgeBoardçš„PYNQç§»æ¤</title>
    <link href="https://zhutmost.com/Engineering/pynq-compile/"/>
    <id>https://zhutmost.com/Engineering/pynq-compile/</id>
    <published>2021-08-12T14:43:32.000Z</published>
    <updated>2023-08-16T08:44:33.837Z</updated>
    
    <content type="html"><![CDATA[<p>PYNQæ˜¯æˆ‘å¾ˆå–œæ¬¢çš„ä¸€ä¸ªFPGAå¼€æºå·¥å…·ã€‚å®ƒå°†Zynqä¸Šçš„å„ç§ç¡¬ä»¶èµ„æºç”¨Pythonå°è£…äº†èµ·æ¥ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡Jupytor Notebookè¿œç¨‹è°ƒè¯•FPGAã€‚å°†PYNQç§»æ¤åˆ°Baidu EdgeBoardä¸Šæ˜¯æˆ‘å»å¹´åœ¨COVIDç–«æƒ…æœŸé—´å¼€çš„å‘ï¼ˆå…·ä½“è¯·å‚çœ‹<a href="https://github.com/zhutmost/edgeboard">æˆ‘çš„GitHub</a>ï¼‰ï¼Œä½†ä¸­é—´é‡åˆ°çš„å°é—®é¢˜æœ‰ç‚¹å¤šï¼Œä¾¿ä¸€ç›´æ²¡æœ‰å®Œå…¨å¡«ä¸Šã€‚æˆ‘æœ€è¿‘æŠ½å‡ºäº†äº›æ—¶é—´é‡æ–°æ‹¾èµ·äº†è¿™ä¸ªäº‹æƒ…ï¼Œå°±é¡ºä¾¿æŠŠæ•´ä¸ªè¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜éƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥é£¨åæ¥è€…ã€‚</p><p>ç›¸å…³æºä»£ç å·²å¼€æºè‡³<a href="https://github.com/zhutmost/edgeboard">Github</a>ï¼Œé¢„ç¼–è¯‘PYNQé•œåƒæ–‡ä»¶æˆ‘ä¹Ÿå·²ä¸Šä¼ è‡³<a href="https://www.aliyundrive.com/s/6biJpMiKrpD">é˜¿é‡Œäº‘ç›˜</a>ã€‚å› ä¸ºè®¾å¤‡æœ‰é™ï¼Œæˆ‘æ²¡æœ‰ä¸ºè¿™ä¸ªé•œåƒè¿›è¡Œæ‰€æœ‰å¤–è®¾çš„ä¸Šæ¿æµ‹è¯•ã€‚å¦‚æœä½ å‘ç°äº†ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿å’Œæˆ‘è”ç³»ã€‚</p><span id="more"></span><p>PYNQå®˜æ–¹æä¾›äº†<a href="https://pynq.readthedocs.io/en/latest/pynq_sd_card.html">SDå¡é•œåƒç¼–è¯‘çš„æ–‡æ¡£</a>ï¼Œå› æ­¤ä¸€äº›æ¯”è¾ƒæ˜ç¡®çš„æ­¥éª¤æˆ‘å¯èƒ½ä¸ä¼šè¯¦è¿°ï¼Œè¯·æ­é…å®˜æ–¹æ–‡æ¡£é˜…è¯»ã€‚</p><p>ä¸ºäº†é¿å…æ··æ·†ï¼Œè¿™é‡Œå…ˆæ¾„æ¸…ä¸€ä¸‹å¾ˆå¤šæœ‹å‹çš„ä¸€ä¸ªå°è¯¯è§£ï¼šæœ¬æ–‡ä¸­çš„PYNQæŒ‡çš„æ˜¯PYNQæ¡†æ¶ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªUbuntuï¼‰ï¼Œè€Œéé‚£ä¸¤ä¸ªç²‰è‰²çš„å¼€å‘æ¿ï¼ˆPYNQ-Z1å’ŒPYNQ-Z2ï¼‰ã€‚PYNQå¯ä»¥éƒ¨ç½²åœ¨PYNQ-Z1å’ŒPYNQ-Z2ä¸Šï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨å…¶ä»–Zynqç³»åˆ—çš„FPGAä¸Šã€‚</p><h2 id="å¼€å§‹ä¹‹å‰"><a href="#å¼€å§‹ä¹‹å‰" class="headerlink" title="å¼€å§‹ä¹‹å‰"></a>å¼€å§‹ä¹‹å‰</h2><p>Xilinxæä¾›äº†PYNQ-Z1ã€PYNQ-Z2ã€ZCU104ç­‰å¼€å‘æ¿çš„é•œåƒï¼Œå¯ä»¥ç›´æ¥ä»PYNQç½‘ç«™ä¸Šä¸‹è½½åˆ°ï¼Œå…·ä½“åˆ—è¡¨å¯ä»¥åœ¨<a href="http://pynq.io/board.html">PYNQçš„ä¸‹è½½é¡µé¢</a>æ‰¾åˆ°ï¼ˆä¹ŸåŒ…æ‹¬Ultra96ç­‰ç¬¬ä¸‰æ–¹å¼€å‘æ¿ï¼‰ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ­¤å¤–çš„å¼€å‘æ¿ï¼ˆæ¯”å¦‚æœ¬æ–‡ä¸­çš„EdgeBoard Liteï¼‰ä¸Šä½¿ç”¨PYNQï¼Œå°±éœ€è¦è‡ªå·±ç¼–è¯‘PYNQé•œåƒã€‚</p><p>æœ¬æ–‡çš„ç¼–è¯‘ç›®æ ‡æ˜¯PYNQ v2.7ã€‚æœ¬æ–‡å†™ä½œæ—¶ï¼ˆ2021å¹´8æœˆï¼‰PYNQ2.7çš„å¼€å‘å·²ç»å®Œæˆï¼Œä½†æ˜¯è¿˜æ²¡æœ‰åˆå…¥ä¸»çº¿åˆ†æ”¯ï¼Œæ–‡æ¡£ä¹Ÿæ²¡æœ‰æ›´æ–°ï¼ˆä½†å·®åˆ«ä¸å¤§ï¼Œåæ­£å„ç§å¥‡å¥‡æ€ªæ€ªçš„bugæœ¬æ¥ä¹Ÿä¸ä¼šå†™åœ¨æ–‡æ¡£é‡Œï¼‰ã€‚æ¯æ¬¡å¤§ç‰ˆæœ¬ï¼ˆå³2.Xï¼‰æ›´æ–°åï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œä¾èµ–è½¯ä»¶åŒ…ä¹‹é—´ä¼šå‡ºç°äº”èŠ±å…«é—¨çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¾ˆå¯èƒ½è¦åˆ°ä¸‹ä¸€æ¬¡PYNQå¤§ç‰ˆæœ¬æ›´æ–°æ‰ä¼šä¸€æ¬¡æ€§ä¿®å¤ã€‚è¿™ä¸ªé—®é¢˜ä¸»è¦å¾—å½’å’äºXilinxå®˜æ–¹ï¼ŒPYNQçš„ç¼–è¯‘ä¸­ä¾èµ–çš„å¾ˆå¤šè½¯ä»¶éƒ½ä¸æŒ‡å®šç‰¹å®šç‰ˆæœ¬ã€‚å› æ­¤ï¼Œå¦‚æœä½ çœ‹åˆ°æœ¬æ–‡æ—¶å·²æ˜¯å¾ˆä¹…ä¹‹åï¼Œæ–‡ç« ä¸­é‡åˆ°çš„é—®é¢˜å’Œä½ é‡åˆ°çš„å¯èƒ½ä¸å°½ç›¸åŒã€‚</p><p>ç¡¬ä»¶ä¸Šï¼Œé™¤äº†Edgeboardæœ¬èº«ï¼Œæˆ‘å‡†å¤‡äº†ä¸€å°åŠæ·˜æ±°çš„ç¬”è®°æœ¬æ­å»ºç¼–è¯‘ç¯å¢ƒã€‚è¿™ä¸ªä¸æ˜¯å¾ˆé‡è¦ï¼ˆè™šæ‹Ÿæœºä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼‰ï¼Œå”¯ä¸€éœ€è¦ç¡®è®¤çš„æ˜¯å‰©ä½™ç£ç›˜ç©ºé—´è¦å¤Ÿå¤§ï¼ˆå¤§çº¦200GBï¼‰ã€‚</p><p>PYNQ v2.7éœ€è¦Vivado&#x2F;Vitis&#x2F;PetaLinuxçš„ç‰ˆæœ¬ä¸º2020.2ã€‚æˆ‘çš„æ“ä½œç³»ç»Ÿæ˜¯Ubuntu 18.04.5 LTSã€‚Vivado&#x2F;Vitis 2020.2æœ€é«˜æ”¯æŒUbuntu 18.04.4ï¼Œå®‰è£…æ—¶éœ€è¦ä¿®æ”¹<code>/etc/os-release</code>éª—è¿‡å®‰è£…ç¨‹åºã€‚è¿™é‡Œæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å»ºè®®è¯·ä¸¥æ ¼æŒ‰ç…§Xilinxçš„å®‰è£…æŒ‡å—ï¼Œæˆ‘ä¸å»ºè®®ä½ å’Œæˆ‘ä¸€æ ·æ“ä½œã€‚</p><p>ç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦ä»äº’è”ç½‘ä¸Šä¸‹è½½å¤§é‡ä¾èµ–ç»„ä»¶ï¼Œè¯·ç¡®ä¿ä½ èƒ½å¤Ÿè‡ªç”±è®¿é—®äº’è”ç½‘ã€‚</p><h2 id="ç†æƒ³çš„ç¼–è¯‘è¿‡ç¨‹"><a href="#ç†æƒ³çš„ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç†æƒ³çš„ç¼–è¯‘è¿‡ç¨‹"></a>ç†æƒ³çš„ç¼–è¯‘è¿‡ç¨‹</h2><h3 id="è®¾ç½®PYNQç¯å¢ƒ"><a href="#è®¾ç½®PYNQç¯å¢ƒ" class="headerlink" title="è®¾ç½®PYNQç¯å¢ƒ"></a>è®¾ç½®PYNQç¯å¢ƒ</h3><p>é¦–å…ˆå°†PYNQçš„GitHub Repoå¤åˆ¶åˆ°æœ¬åœ°ï¼Œå¹¶åˆ‡æ¢åˆ°<code>image_v2.7</code>åˆ†æ”¯ã€‚</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ git <span class="built_in">clone</span> https://github.com/Xilinx/PYNQ.git pynq</span><br><span class="line">â¯ <span class="built_in">cd</span> pynq</span><br><span class="line">â¯ git checkout image_v2.7</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥ä¸‹æ¥çš„ä¸»è¦å·¥ä½œéƒ½åœ¨<code>sdbuild</code>ç›®å½•ä¸‹è¿›è¡Œã€‚å…ˆè¿è¡Œ<code>scripts/setup_host.sh</code>ï¼Œå®ƒä¼šç”¨aptå®‰è£…å„ç§éœ€è¦çš„åŒ…ï¼Œä»¥åŠä¸‹è½½QEMUå’ŒCrossTool-NGã€‚</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ <span class="built_in">source</span> ./scripts/setup_host.sh</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæœ¬è¿è¡Œéœ€è¦å¾ˆä¹…çš„æ—¶é—´ï¼ˆä¸»è¦æ˜¯å› ä¸ºä¸‹è½½QEMUå’ŒCrossTool-NGçš„å®‰è£…åŒ…ï¼‰ï¼Œä½†å¥½åœ¨åªéœ€è¦è¿è¡Œä¸€æ¬¡ã€‚</p><p>åç»­ç¼–è¯‘è¿‡ç¨‹è¿˜ä¼šä¾èµ–Ninjaï¼Œç„¶è€Œè¯¥è„šæœ¬ä¸­æ²¡æœ‰å®‰è£…ï¼Œå› æ­¤æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…ä¸‹ã€‚</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ninja-build</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼ŒXilinxå…¨å®¶æ¡¶éœ€è¦çš„å„ç§ä¾èµ–åŒ…ä¹Ÿå®‰è£…å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å®‰è£…Xilinxå…¨å®¶æ¡¶äº†ã€‚</p><h3 id="å®‰è£…Xilinxå…¨å®¶æ¡¶"><a href="#å®‰è£…Xilinxå…¨å®¶æ¡¶" class="headerlink" title="å®‰è£…Xilinxå…¨å®¶æ¡¶"></a>å®‰è£…Xilinxå…¨å®¶æ¡¶</h3><p>æˆ‘ä»¬éœ€è¦å®‰è£…Vivadoã€Vitisã€PetaLinuxä¸‰ä¸ªè½¯ä»¶ã€‚æŒ‰ç…§PYNQ v2.7çš„ç‰ˆæœ¬è¦æ±‚ï¼Œä¸‰è€…çš„ç‰ˆæœ¬éƒ½å¿…é¡»æ˜¯2020.2ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™å®‰è£…ã€‚</p><p>Vivadoå’ŒVitisæ˜¯é€šè¿‡åŒä¸€ä¸ªå®‰è£…ç¨‹åºå®‰è£…çš„ï¼Œå®‰è£…æ—¶å‘½ä»¤è¡Œè¿è¡Œ<code>./xsetup</code>ï¼Œå‹¾é€‰éœ€è¦çš„ç»„ä»¶å³å¯ã€‚</p><p>PetaLinuxå®‰è£…çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ petalinux-v2020.2-final-installer.run --<span class="built_in">dir</span> &lt;xilinx_install_dir&gt;/petalinux/2020.2 --platform <span class="string">&quot;aarch64 arm&quot;</span></span><br></pre></td></tr></table></figure><p>å…·ä½“å®‰è£…é€‰é¡¹å¯ä»¥å‚è€ƒ<a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>ã€‚è¿™é‡Œå­˜åœ¨ä¸€ä¸ªå‘ï¼ŒPetaLinuxçš„å®‰è£…ç¨‹åºå…è®¸ç”¨æˆ·ä»»æ„æŒ‡å®šå®‰è£…ä½ç½®ï¼Œä½†æ˜¯PYNQä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤å´è¦æ±‚å®ƒçš„è·¯å¾„å¿…é¡»æ˜¯<code>.../2020.2/</code>çš„å½¢å¼ï¼ˆv2.7æœ‰æ— ä¿®å¤ä¸ç¡®å®šï¼Œæˆ‘æ²¡æœ‰å»æµ‹è¯•ï¼‰ã€‚</p><p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸‹é¢å‡ è¡Œä»£ç åŠ å…¥<code>.bashrc</code>ï¼ˆä¹Ÿå¯ä»¥æ¯æ¬¡æ‰“å¼€å‘½ä»¤è¡Œæ‰‹åŠ¨æ‰§è¡Œï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œè¿™äº›è½¯ä»¶äº†ã€‚</p><figure class="highlight bash"><figcaption><span>.bashrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> &lt;xilinx_install_dir&gt;/petalinux/2020.2/settings.sh</span><br><span class="line"><span class="built_in">source</span> &lt;xilinx_install_dir&gt;/Vivado/2020.2/settings64.sh</span><br><span class="line"><span class="built_in">source</span> &lt;xilinx_install_dir&gt;/Vitis/2020.2/settings64.sh</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è‡ªå®šä¹‰å¼€å‘æ¿"><a href="#æ·»åŠ è‡ªå®šä¹‰å¼€å‘æ¿" class="headerlink" title="æ·»åŠ è‡ªå®šä¹‰å¼€å‘æ¿"></a>æ·»åŠ è‡ªå®šä¹‰å¼€å‘æ¿</h3><p>PYNQåœ¨<code>boards</code>æ–‡ä»¶å¤¹ä¸‹é¢„ç½®äº†<code>Pynq-Z1</code>ã€<code>Pynq-Z2</code>ã€<code>ZCU104</code>ä¸‰ä¸ªä¸å¯¹åº”å¼€å‘æ¿åŒåçš„æ–‡ä»¶å¤¹ã€‚å®ƒä»¬çš„å†…éƒ¨ç»“æ„å¤§åŒå°å¼‚ï¼Œä¸»è¦åˆ†æˆä»¥ä¸‹äº”ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><code>notebooks</code>ï¼›</li><li><code>petalinux_bsp</code>ï¼›</li><li><code>packages</code>ï¼›</li><li><code>base</code>ã€<code>logictools</code>ç­‰<code>Overlay</code>æ–‡ä»¶å¤¹ï¼›</li><li><code>&lt;board_name&gt;.spec</code>ã€‚</li></ol><p>ä¸‹é¢ç®€å•ä»‹ç»ä¸‹è¿™äº›æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„åŠŸèƒ½ï¼Œå…·ä½“çš„ç»†èŠ‚ï¼ˆå¦‚æœä½ éœ€è¦å®šåˆ¶ä¸€äº›å¤æ‚çš„ä¸œè¥¿ï¼‰è¿˜è¯·è‡ªè¡Œé˜…è¯»PYNQçš„ç¼–è¯‘è„šæœ¬æºä»£ç ã€‚</p><p><code>notebooks</code>æ–‡ä»¶å¤¹ä¼šåŸæ ·å¤åˆ¶åˆ°æœ€ç»ˆçš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæ¯æ¬¡å¤§å®¶æ‰“å¼€Jupyter Notebookåçœ‹åˆ°çš„å°±æ˜¯å®ƒã€‚è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œçš„å†…å®¹ä¸æ˜¯å¾ˆé‡è¦ï¼Œä¸€èˆ¬éƒ½æ˜¯æ”¾äº›æ•™ç¨‹ã€‚</p><p><code>petalinux_bsp</code>æ–‡ä»¶å¤¹ç”¨äºPetaLinuxç”ŸæˆBSPï¼Œå®ƒåªåœ¨<code>sdbuild/scripts/create_bsp.sh</code>è„šæœ¬ä¸­ç”¨åˆ°ã€‚è¯¥æ–‡ä»¶å¤¹é‡Œè¾¹åŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶å¤¹<code>meta-user</code>ã€<code>hardware_project</code>ã€‚å…¶ä¸­ï¼Œ<code>meta-user</code>æ–‡ä»¶å¤¹ä¼šè¢«å¤åˆ¶åˆ°PetaLinuxé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„<code>project-spec/meta-user</code>ï¼Œé‡Œé¢æ”¾è®¾å¤‡æ ‘æ–‡ä»¶ã€å„ç§ç”¨æˆ·é…ç½®ç­‰ï¼ˆå¦‚æœä½ å¯¹PetaLinuxé¡¹ç›®çš„ç›®å½•ç»“æ„ä¸äº†è§£çš„è¯å¯ä»¥å‚è€ƒ<a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>ï¼‰ã€‚<code>hardware_project</code>é‡Œéœ€è¦æ”¾<code>.xsa</code>ç¡¬ä»¶æè¿°æ–‡ä»¶ï¼ˆè¯¥æ–‡ä»¶ç”±Vivadoå¯¼å‡ºï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ”¾ä¸€äº›è„šæœ¬ï¼ˆè‡³å°‘åŒ…æ‹¬ä¸€ä¸ªMakefileï¼‰ä¾›PetaLinuxå®æ—¶åœ°ç”Ÿæˆ<code>.xsa</code>æ–‡ä»¶ã€‚å¦‚æœç”¨æˆ·åœ¨<code>&lt;board_name&gt;.spec</code>ä¸­æŒ‡å®šäº†BSPï¼Œé‚£ä¹ˆ<code>hardware_project</code>ä¸ä¼šè¢«ç”¨åˆ°ã€‚è¿™é‡Œä¸€ä¸ªæ–‡æ¡£ä¸­ä¸€ä¸ªæ²¡æœ‰æ³¨æ˜çš„æ˜¯ï¼Œ<code>meta-user</code>æ€»æ˜¯ä¼šèµ·ä½œç”¨ï¼Œå³ä½¿ä½ æŒ‡å®šäº†BSPï¼Œå®ƒä¹Ÿä¼šè¦†ç›–æ‰é‡Œè¾¹çš„<code>meta-user</code>å¹¶é‡æ–°æ‰“åŒ…ã€‚</p><p><code>packages</code>æ–‡ä»¶å¤¹çš„ç»“æ„å’Œ<code>sdbuild/packages</code>çš„ç»“æ„ç±»ä¼¼ï¼Œè¿™ä¸¤ä¸ªç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶å¤¹å¯¹åº”ä¸€ä¸ªä¸ªçš„ç»„ä»¶ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šè¢«å®‰è£…åˆ°RootFSä¸­ã€‚å®‰è£…è¿‡ç¨‹ä¸»è¦æ˜¯åœ¨<code>sdbuild/scripts/install_packages.sh</code>ä¸­è¿›è¡Œã€‚å¦‚æœä½ éœ€è¦å¢åŠ ç»„ä»¶ï¼Œå»ºè®®é˜…è¯»æ­¤è„šæœ¬å’Œ<code>sdbuild/packages/README.md</code>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p><p>å…¶ä»–æ–‡ä»¶å¤¹ä¸­å¦‚æœå­˜åœ¨Makefileæ–‡ä»¶ï¼Œå°±ä¼šè¢«è®¤ä¸ºæ˜¯<code>Overlay</code>æ–‡ä»¶å¤¹ã€‚åœ¨ç¼–è¯‘<code>pynq</code>æœ¬èº«æ—¶ï¼Œ<code>&lt;pynq_repo_dir&gt;/build.sh</code>è„šæœ¬ä¼šè¯•å›¾è¿›å…¥è¿™äº›æ–‡ä»¶å¤¹ï¼Œå¹¶æŒ¨ä¸ªæ£€æŸ¥æ˜¯å¦å­˜åœ¨<code>.bit</code>ã€<code>.hwh</code>ã€<code>.xsa</code>ç­‰æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶å¤¹ä¸æ˜¯å¿…é¡»çš„ï¼Œä¸»è¦æ˜¯ä¸ºç”¨æˆ·æä¾›ä¸€äº›é’ˆå¯¹è¯¥å¼€å‘æ¿çš„é¢„ç½®<code>Overlay</code>ã€‚</p><p><code>&lt;board_name&gt;.spec</code>æ–‡ä»¶æè¿°äº†é’ˆå¯¹è¯¥å¼€å‘æ¿çš„å„ç§é…ç½®å’Œæ–‡ä»¶è·¯å¾„ã€‚å®ƒçš„æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight makefile"><figcaption><span>board_name.spec</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ARCH_&lt;board_name&gt; := aarch64 <span class="comment"># Zynqçš„CPUæ¶æ„ï¼Œå¯ä»¥æ˜¯aarch64æˆ–arm</span></span><br><span class="line">BSP_&lt;board_name&gt; := ... <span class="comment"># å¼€å‘æ¿çš„BSPæ–‡ä»¶ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span></span><br><span class="line">BITSTREAM_&lt;board_name&gt; := ... <span class="comment"># é»˜è®¤çš„æ¯”ç‰¹æµæ–‡ä»¶</span></span><br><span class="line">FPGA_MANAGER_&lt;board_name&gt; := 1</span><br><span class="line"></span><br><span class="line">STAGE4_PACKAGES_&lt;board_name&gt; := pynq ethernet ...</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„<code>board_name</code>è¦å’Œæ–‡ä»¶å¤¹çš„åå­—ä¸€è‡´ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä¾æ ·ç”»è‘«èŠ¦ä¸ºè‡ªå·±çš„å¼€å‘æ¿é…ç½®è¿™äº›æ–‡ä»¶äº†ã€‚<br>æˆ‘åœ¨<a href="https://github.com/zhutmost/edgeboard/tree/master/pynq">edgeboardçš„ä»“åº“</a>ä¸­æ”¾ç½®äº†é’ˆå¯¹EdgeBoard Liteçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦çš„è¯ä½ ä¹Ÿå¯ä»¥å‚è€ƒã€‚</p><h3 id="ä¸€æŠŠæ¢­ç¼–è¯‘ï¼ŒèµŒäººå“"><a href="#ä¸€æŠŠæ¢­ç¼–è¯‘ï¼ŒèµŒäººå“" class="headerlink" title="ä¸€æŠŠæ¢­ç¼–è¯‘ï¼ŒèµŒäººå“"></a>ä¸€æŠŠæ¢­ç¼–è¯‘ï¼ŒèµŒäººå“</h3><p>æŒ‰ç…§å®˜æ–¹çš„æµç¨‹ï¼Œç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥å¼€å§‹è¿›è¡Œæ¼«é•¿çš„ç¼–è¯‘äº†ã€‚ä¸è¿‡æˆ‘å¼ºçƒˆå»ºè®®ä½ å…ˆé˜…è¯»ä¸‹åç»­çš„å‡ ä¸ªç« èŠ‚å†å¼€å§‹ç¼–è¯‘ï¼ˆå¯ä»¥é¿å…å¾ˆå¤šæ— è°“çš„æ—¶é—´æµªè´¹ï¼‰ã€‚</p><p>åœ¨<code>sdbuild</code>ä¸‹è¿è¡Œï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ make BOARDDIR=&lt;edgeboard_repo_dir&gt;/edgeboard/pynq BOARDS=edgeboard-fz3a</span><br></pre></td></tr></table></figure><p>è¿æ°”ä¸é”™çš„è¯ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨å‡ ä¸ªå°æ—¶åè·å¾—æœ€ç»ˆçš„SDå¡é•œåƒ<code>edgeboard-fz3a-2.7.0.img</code>ï¼Œç„¶åå°±å¯ä»¥å°†å…¶çƒ§å†™åˆ°SDå¡ä¸Šäº†ã€‚</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ sudo <span class="built_in">dd</span> <span class="keyword">if</span>=&lt;pynq_repo_dir&gt;/sdbuild/output/edgeboard-fz3a-2.7.0.img bs=1M of=/dev/mmcblk0 &amp;&amp; <span class="built_in">sync</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œä½ çš„SDå¡è®¾å¤‡åå¯èƒ½ä¸æ˜¯<code>/dev/mmcblk0</code>ï¼Œè¯·åŠ¡å¿…å†ä¸‰ç¡®è®¤ï¼Œä»¥å…å†™å…¥å…¶ä»–ç£ç›˜ä¸¢å¤±æ•°æ®ã€‚</p><h2 id="å„ç§å¸¸è§å’Œä¸å¸¸è§çš„Bug"><a href="#å„ç§å¸¸è§å’Œä¸å¸¸è§çš„Bug" class="headerlink" title="å„ç§å¸¸è§å’Œä¸å¸¸è§çš„Bug"></a>å„ç§å¸¸è§å’Œä¸å¸¸è§çš„Bug</h2><p>å®è·µä¸­ï¼Œä¸Šä¸€æ­¥åä¹‹å…«ä¹ä¼šé‡åˆ°å„ç§å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼Œç„¶åæŠ¥é”™é€€å‡ºã€‚è¿™é‡Œæˆ‘æ²¡æ³•ç»™å‡ºä¸€ä¸ªä¸‡èƒ½æ–¹æ³•ï¼Œåªèƒ½è¯´â€œå…·ä½“æƒ…å†µï¼Œå…·ä½“åˆ†æâ€ã€‚è®°å¾—å¤šç¿»æ—¥å¿—ï¼Œå¤šé—®è°·æ­Œã€‚</p><p>æˆ‘æŠŠå„ç§æˆ‘é‡åˆ°çš„é—®é¢˜ç½—åˆ—äºæ­¤ï¼Œå¹¶æä¾›äº†æˆ‘çš„åŸå› åˆ†æå’Œè§£å†³æ–¹æ³•ã€‚</p><h3 id="NodeJSå®‰è£…æ—¶æŠ¥é”™base-files-is-not-configured"><a href="#NodeJSå®‰è£…æ—¶æŠ¥é”™base-files-is-not-configured" class="headerlink" title="NodeJSå®‰è£…æ—¶æŠ¥é”™base_files is not configured"></a>NodeJSå®‰è£…æ—¶æŠ¥é”™<code>base_files is not configured</code></h3><p>åœ¨è¿è¡Œåˆ°<code>sdbuild/packages/jupyter/qemu.sh</code>æ—¶ï¼Œå®ƒä¼šç”¨aptå®‰è£…NodeJSï¼ˆè¿™æ˜¯è¿è¡ŒJupyter Notebookå¿…è¦çš„ï¼‰ã€‚æ­¤æ—¶ï¼Œaptå®‰è£…æ— æ³•å®Œæˆï¼Œå¹¶å‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Setting up base-files (11ubuntu5) ...</span><br><span class="line">/bin/rmdir: failed to remove <span class="string">&#x27;/var/run&#x27;</span>: Directory not empty</span><br><span class="line">dpkg: error processing package base-files (--configure):</span><br><span class="line"> installed base-files package post-installation script subprocess returned error <span class="built_in">exit</span> status 1</span><br><span class="line">dpkg: dependency problems prevent configuration of bash:</span><br><span class="line"> bash depends on base-files (&gt;= 2.1.12); however:</span><br><span class="line">  Package base-files is not configured yet.</span><br><span class="line"></span><br><span class="line">dpkg: error processing package bash (--configure):</span><br><span class="line"> dependency problems - leaving unconfigured</span><br><span class="line">Errors were encountered <span class="keyword">while</span> processing:</span><br><span class="line"> base-files</span><br><span class="line"> bash</span><br><span class="line">No apport report written because the error message indicates its a followup error from a previous failure.</span><br><span class="line">E: Sub-process /usr/bin/dpkg returned an error code (1)</span><br></pre></td></tr></table></figure><p>å®ƒæç¤ºNodeJSåœ¨å®‰è£…æ—¶éœ€è¦è®¿é—®ä¸€ä¸ªåä¸º<code>base-files</code>çš„ç»„ä»¶ï¼Œä½†æ˜¯è¯¥ç»„ä»¶åœ¨æ­¤æ—¶è¿˜æ²¡æœ‰å®Œæˆâ€œconfigureâ€ã€‚æˆ‘ä»¬æ²¿ç€è¿™ä¸ªä¿¡æ¯å¾€ä¸Šè¿½æº¯çš„è¯ï¼Œä¼šä¸€ç›´æ‰¾åˆ°RootFSçš„åˆå§‹åŒ–ï¼Œæ­¤æ—¶è¯¥ç»„ä»¶åº”å½“å®Œæˆå®‰è£…ã€‚</p><p>PYNQé‡‡ç”¨Multistrapä½œä¸ºRootFSçš„åˆå§‹åŒ–å·¥å…·ï¼Œå®ƒåˆ©ç”¨aptä¸‹è½½æ‰€éœ€è¦çš„åŒ…å¹¶è¿›è¡Œå®‰è£…ã€‚<code>base-files</code>æ­£æ˜¯å…¶ä¸­ä¸€ä¸ªæ­¤æ—¶åº”å½“è¢«å®‰è£…çš„åŒ…ï¼Œå®Œæ•´çš„åŒ…åˆ—è¡¨å¯ä»¥è§<code>ubuntu/focal/aarch64/multistrap.config</code>ã€‚è§‚å¯Ÿå®‰è£…æ—¥å¿—ï¼Œå¯ä»¥æœ€ç»ˆå®šä½åˆ°çœŸæ­£çš„é”™è¯¯åŸå› ï¼š<code>base-files</code>çš„å®‰è£…ä¼šç”¨åˆ°<code>chmod</code>ï¼Œè¿™è¦æ±‚å¦ä¸€ä¸ªåä¸º<code>base-passwd</code>çš„åŒ…å¿…é¡»æ¯”å®ƒå…ˆå®Œæˆâ€œconfigureâ€ï¼Œå¦åˆ™<code>base-files</code>çš„å®‰è£…å°±ä¼šå¤±è´¥ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯<code>base-files</code>ä¾èµ–<code>base-passwd</code>ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆRootFSåˆå§‹åŒ–æ—¶éƒ¨åˆ†åŒ…å®‰è£…å¤±è´¥åä¸ä¼šæŠ¥é”™å‘¢ï¼ŸåŸå› åœ¨<code>sdbuild/scripts/create_rootfs.sh</code>è„šæœ¬ä¸­å¦‚ä¸‹çš„ä¸¤è¡Œä»£ç æŠ‘åˆ¶äº†<code>postinst1.sh</code>å’Œ<code>postinst2.sh</code>ä¸¤ä¸ªè„šæœ¬çš„æŠ¥é”™ï¼š</p><figure class="highlight bash"><figcaption><span>create_rootfs.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$dry_run</span> sudo -E <span class="built_in">chroot</span> <span class="variable">$target</span> bash postinst1.sh</span><br><span class="line">... <span class="comment"># other stuff</span></span><br><span class="line"><span class="variable">$dry_run</span> sudo -E <span class="built_in">chroot</span> <span class="variable">$target</span> bash postinst2.sh</span><br></pre></td></tr></table></figure><p>å› æ­¤æ­¤å¤„å³ä½¿å‘ç”Ÿå®‰è£…å¤±è´¥ï¼Œç¨‹åºä¹Ÿä¼šç»§ç»­æ‰§è¡Œä¸‹å»ã€‚</p><p>æ›´ä¸ºæœ¬è´¨çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä¸ºä»€ä¹ˆdpkgæ— æ³•æ£€æµ‹åˆ°ä¸Šè¿°ä¸¤ä¸ªè½¯ä»¶åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è¿™å·²ç»è¶…å‡ºäº†PYNQçš„èŒƒç•´ï¼Œæ ¹æ®Debianç¤¾åŒºçš„æ„æ€å¤§ä½“ä¸Šå¯ä»¥è¿™ä¹ˆç†è§£ï¼š<code>base-files</code>å’Œ<code>base-passwd</code>éƒ½æ˜¯å±äºEssentialçš„åŒ…ï¼Œç†è®ºä¸Šå®ƒä»¬éƒ½æ˜¯å¿…è£…çš„ï¼Œå› æ­¤å°±æ²¡æœ‰è®¾ç½®ä¾èµ–å…³ç³»ã€‚å¦‚æœæˆ‘ä»¬ä¸ºè¿™äº›å¿…è£…çš„ç»„ä»¶ä¹‹é—´ç›¸äº’è®¾ç½®ä¾èµ–å…³ç³»çš„è¯ï¼Œä¼šé™·å…¥å¾ªç¯ä¾èµ–çš„åœ°ç‹±ã€‚é‚£ä¹ˆåœ¨å®‰è£…æ—¶å®ƒä»¬ä¹‹é—´å‘ç”Ÿä¾èµ–å†²çªæ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜è‡³å°‘åœ¨2011å¹´å°±<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=612426">æœ‰äººæå‡ºè¿‡</a>ï¼Œç¤¾åŒºçš„ç»“è®ºæ˜¯è¿™ä¸ªé—®é¢˜å¹¶ä¸å¸¸è§ï¼ˆå¤šæ•°æ—¶å€™<code>base-passwd</code>æ€»æ¯”<code>base-files</code>å…ˆå®Œæˆâ€œconfigureâ€ï¼‰ï¼Œæ‰€ä»¥ä¸å¦¨ä¾é ç„å­¦ã€‚ä»–ä»¬è®¤ä¸ºè¿™ä¸ªé—®é¢˜åœ¨æ–°çš„Multistrapç‰ˆæœ¬ä¸Šä¸ä¼šå‡ºç°ï¼Œç„¶è€Œå¹¶ä¸ã€‚</p><p>è¿™é‡Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯æ‰‹å·¥æŒ‡å®š<code>dpkg --configure</code>çš„é¡ºåºï¼Œå°†<code>sdbuild/scripts/create_rootfs.sh</code>çš„<code>postinst1.sh</code>éƒ¨åˆ†ä¸­åŸå…ˆçš„<code>dpkg --configure -a</code>ä¿®æ”¹æˆï¼š</p><figure class="highlight bash"><figcaption><span>create_rootfs.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆå®Œæˆbase-passwdçš„configure</span></span><br><span class="line">dpkg --configure gcc-10-base libcrypt1 libc6 libgcc-s1 libdebconfclient0 base-passwd</span><br><span class="line"><span class="comment"># å†å®Œæˆå…¶ä»–ç»„ä»¶çš„configure</span></span><br><span class="line">dpkg --configure -a</span><br></pre></td></tr></table></figure><h3 id="python2-7-minimalå®‰è£…å¤±è´¥"><a href="#python2-7-minimalå®‰è£…å¤±è´¥" class="headerlink" title="python2.7-minimalå®‰è£…å¤±è´¥"></a><code>python2.7-minimal</code>å®‰è£…å¤±è´¥</h3><p>ä¸ä¸Šä¸ªé—®é¢˜ç±»ä¼¼ï¼Œæœ‰æ—¶ä¼šå‡ºç°<code>python2.7-minimal</code>è¿™ä¸ªåŒ…çš„<code>configure</code>å¤±è´¥ã€‚è¿™ä¸ªé—®é¢˜æœ¬èº«ä¸æ˜¯å¾ˆä¸¥é‡ï¼Œå› ä¸º<code>postinst1.sh</code>å’Œ<code>postinst2.sh</code>ä¸¤ä¸ªè„šæœ¬ä¼šå„æ‰§è¡Œä¸€é<code>dpkg --configure -a</code>ï¼Œå› æ­¤ç¬¬ä¸€éä¸­æå°‘é‡æ²¡æˆåŠŸå®‰è£…çš„åŒ…ä¼šåœ¨ç¬¬äºŒéä¸­å®Œæˆå®‰è£…ï¼ˆæ¯”å¦‚<code>cups-pk-helper</code>è¿™ä¸ªåŒ…ç»å¸¸å¦‚æ­¤ï¼‰ã€‚ç„¶è€Œï¼Œå› ä¸ºæœ‰å¤§é‡åŒ…ä¾èµ–äº<code>python2.7-minimal</code>ï¼Œä¸€æ—¦å®ƒå®‰è£…å¤±è´¥åï¼Œä¸€è¿ä¸²çš„åŒ…ä¼šä¸€åŒå®‰è£…å¤±è´¥ï¼Œç„¶åå®‰è£…ç¨‹åºå°±å´©äº†ã€‚</p><p>è¿™é‡Œå¯ä»¥ä»æŠ¥é”™ä¿¡æ¯ä¸­è§‚å¯Ÿåˆ°ï¼Œå®‰è£…å¤±è´¥çš„åŸå› æ˜¯å®ƒçš„<code>postinst</code>è„šæœ¬ä¸­ç”¨åˆ°äº†<code>awk</code>ï¼Œç„¶è€Œæ­¤æ—¶<code>awk</code>è¿™ä¸ªå‘½ä»¤è¿˜æœªå®‰è£…ã€‚è§£å†³æ–¹æ³•ä¹Ÿå’Œä¸Šä¸ªé—®é¢˜ç±»ä¼¼ï¼Œå³æ‰‹å·¥æŒ‡å®š<code>dpkg --configure</code>çš„é¡ºåºï¼Œç¡®ä¿æä¾›<code>awk</code>å‘½ä»¤çš„åŒ…æ¯”<code>python2.7-minimal</code>å…ˆå®Œæˆ<code>configure</code>ã€‚æœ‰å¾ˆå¤šåŒ…éƒ½æä¾›äº†<code>awk</code>å‘½ä»¤ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©äº†<code>mawk</code>ã€‚</p><figure class="highlight bash"><figcaption><span>create_rootfs.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dpkg --configure &lt;... å…¶ä»–éœ€è¦æå‰`configure`çš„åŒ…&gt; mawk</span><br><span class="line">dpkg --configure -a</span><br></pre></td></tr></table></figure><h3 id="æ— æ³•ä»SDå¡å¯åŠ¨ï¼Œæ‰¾ä¸åˆ°RootFS"><a href="#æ— æ³•ä»SDå¡å¯åŠ¨ï¼Œæ‰¾ä¸åˆ°RootFS" class="headerlink" title="æ— æ³•ä»SDå¡å¯åŠ¨ï¼Œæ‰¾ä¸åˆ°RootFS"></a>æ— æ³•ä»SDå¡å¯åŠ¨ï¼Œæ‰¾ä¸åˆ°RootFS</h3><p>è¿™ä¸ªé—®é¢˜æ·±ç©¶èµ·æ¥éå¸¸å¤æ‚ï¼Œç°è±¡æ˜¯çƒ§å†™å®ŒSDå¡ä¸Šæ¿å¡åï¼Œæ— æ³•å®Œæˆå¼€æœºï¼Œå±å¹•&#x2F;ä¸²å£ä¼šæ˜¾ç¤ºå†…æ ¸é”™è¯¯ã€‚å…¶ä¸­æ‹¬å·é‡Œçš„æ•°å­—æˆ‘è¿™è¾¹æ˜¯<code>179,2</code>å’Œ<code>179,10</code>ä¸¤ç§æƒ…å½¢ä¹‹ä¸€ï¼ˆæˆ‘æ²¡æœ‰å½»åº•å¼„æ¸…æ¥šè¿™ä¿©æ•°å­—çš„å«ä¹‰ï¼‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(179,10)</span><br></pre></td></tr></table></figure><p>å…³äºSDå¡çš„ä¸€ç³»åˆ—bugéƒ½ä¼šå¼•èµ·è¿™ä¸ªæŠ¥é”™ã€‚é¦–å…ˆè¯·ç¡®ä¿SDå¡çƒ§å†™æˆåŠŸï¼Œçƒ§å†™å®Œæˆåå¯ä»¥åœ¨Ubuntuä¸­æŒ‚è½½å¹¶å°è¯•æ‰“å¼€æ£€æŸ¥ä¸€ä¸‹ï¼Œå¦‚æœä¸èƒ½æ­£å¸¸æ‰“å¼€çš„è¯é‡æ–°çƒ§å†™ä¸‹ã€‚ç„¶åè¯·å‚è€ƒä»¥ä¸‹å‡ ç‚¹ä¾æ¬¡æ’æŸ¥ã€‚å› ä¸ºè¯¥æŠ¥é”™çš„åŸå› å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œå¯èƒ½åˆ—ä¸¾ä¸å…¨ï¼Œè§è°…ã€‚</p><h4 id="ä½¿ç”¨ddçƒ§å†™æ—¶å—å¤§å°ä¸åˆé€‚"><a href="#ä½¿ç”¨ddçƒ§å†™æ—¶å—å¤§å°ä¸åˆé€‚" class="headerlink" title="ä½¿ç”¨ddçƒ§å†™æ—¶å—å¤§å°ä¸åˆé€‚"></a>ä½¿ç”¨<code>dd</code>çƒ§å†™æ—¶å—å¤§å°ä¸åˆé€‚</h4><p>RootFSåˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯Ext4ï¼Œå®ƒåœ¨å¼€æœºæ—¶ä¼šæ£€æŸ¥åˆ†åŒºå¤§å°ï¼Œå› æ­¤å¦‚æœåœ¨<code>dd</code>æ—¶ä½¿ç”¨è¿‡å¤§çš„å—å¤§å°ï¼ˆblock sizeï¼Œä¹Ÿå°±æ˜¯<code>bs=...</code>å‚æ•°ï¼‰ï¼Œå°±ä¼šæ— æ³•é€šè¿‡åˆ†åŒºå¤§å°çš„æ£€æŸ¥ã€‚</p><p>æ¯”å¦‚ç”¨4Mçš„å—å¤§å°çƒ§å†™é•œåƒçš„è¯ï¼ˆå³<code>sudo dd bs=4M if=... of=...</code>ï¼‰ï¼Œå¼€æœºå°±ä¼šä¿é”™ã€‚åœ¨æˆ‘è¿™ä½¿ç”¨1Mçš„å—å¤§å°æ˜¯æ­£å¸¸çš„ï¼Œå…·ä½“å‘½ä»¤å¯ä»¥çœ‹å‰æ–‡ã€‚</p><h4 id="SDå¡çš„å†™ä¿æŠ¤"><a href="#SDå¡çš„å†™ä¿æŠ¤" class="headerlink" title="SDå¡çš„å†™ä¿æŠ¤"></a>SDå¡çš„å†™ä¿æŠ¤</h4><p>è¿™ä¸ªé—®é¢˜ä¼¼ä¹æ˜¯æ¥è‡ªäºå¾ˆå¤šäººä½¿ç”¨äº†æ·˜å®è´­ä¹°EdgeBoard FZ3Aå¼€å‘æ¿æ—¶åº—å®¶æä¾›çš„æ‰€è°“â€œVivadoå‚è€ƒè®¾è®¡â€ã€‚è¿™ä¸ªå‚è€ƒè®¾è®¡ä¸­å…³äºSDå¡çš„é…ç½®å­˜åœ¨é”™è¯¯ï¼Œå®ƒæ‰“å¼€äº†SDå¡æ§½çš„å†™ä¿æŠ¤å¼•è„šã€‚ä½†æ˜¯æ®<a href="https://whycan.com/t_3467.html">WhyCan Forumç¤¾åŒºçš„æ–‡ç« </a>æŒ‡å‡ºï¼ŒEdgeBoardçš„PCBè®¾è®¡ä¸­å»æ‰äº†è¿™ä¸€å¼•è„šã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç¨³å¦¥èµ·è§ï¼Œå¯ä»¥åœ¨è®¾å¤‡æ ‘ä¸­ç¦ç”¨æ‰å†™ä¿æŠ¤åŠŸèƒ½ã€‚</p><p>å¦‚å‰æ–‡æ‰€è¿°ï¼ŒPYNQä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªä¿®æ”¹è®¾å¤‡æ ‘çš„æ¥å£ï¼Œå°±æ˜¯<code>boards/&lt;board_name&gt;/petalinux_bsp</code>æ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬å…ˆåœ¨ç›¸åº”ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè®¾å¤‡æ ‘æ–‡ä»¶ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ <span class="built_in">mkdir</span> -p &lt;pynq_repo_dir&gt;/boards/&lt;board_name&gt;/petalinux_bsp/meta-user/recipes-bsp/device-tree/files</span><br><span class="line">â¯ <span class="built_in">cd</span> &lt;pynq_repo_dir&gt;/boards/&lt;board_name&gt;/petalinux_bsp/meta-user/recipes-bsp/device-tree/files</span><br><span class="line">â¯ <span class="built_in">touch</span> system-user.dtsi</span><br></pre></td></tr></table></figure><p>ç„¶åå¯¹sdhci1èŠ‚ç‚¹ï¼ˆå¯¹åº”äºPS_SD1ï¼Œå³æˆ‘ä»¬çš„SDå¡æ§½ï¼‰è¿›è¡Œä¿®æ”¹ã€‚å®Œæˆä»¥åï¼Œä½ çš„<code>system-user.dtsi</code>æ–‡ä»¶åº”è¯¥é•¿è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight plaintext"><figcaption><span>system-user.dtsi</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/include/ &quot;system-conf.dtsi&quot;</span><br><span class="line">/ &#123; /*æ ¹èŠ‚ç‚¹ï¼Œè¿™é‡Œä¿æŒä¸å˜*/</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;sdhci1 &#123;</span><br><span class="line">  status = &quot;okay&quot;;</span><br><span class="line">  max-frequency = &lt;50000000&gt;;</span><br><span class="line">  no-1-8-v; /*æˆ‘å…¶å®ä¸å¤ªç†è§£è¿™è¡Œçš„ä½œç”¨ï¼Œä½†åæ­£ä¸€å‡ºå…¼å®¹æ€§é—®é¢˜ï¼Œå¤§å®¶å°±ä¼šå†™è¿™ä¸ª*/</span><br><span class="line">  disable-wp; /*å…³æ‰å†™ä¿æŠ¤åŠŸèƒ½*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç†è®ºä¸Šå¦‚æœä½¿ç”¨æˆ‘è‡ªå·±åšçš„Board Filesé‡Œçš„Zynq Presetï¼Œæ˜¯ä¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜çš„ï¼ˆä¸è¿‡æˆ‘æ²¡è¯•ï¼Œé‡æ–°ç¼–è¯‘å¤ªè´¹æ—¶äº†ï¼‰ã€‚</p><h4 id="Bootå‚æ•°ä¸­è®¾ç½®äº†é”™è¯¯çš„rootåˆ†åŒºä½ç½®"><a href="#Bootå‚æ•°ä¸­è®¾ç½®äº†é”™è¯¯çš„rootåˆ†åŒºä½ç½®" class="headerlink" title="Bootå‚æ•°ä¸­è®¾ç½®äº†é”™è¯¯çš„rootåˆ†åŒºä½ç½®"></a>Bootå‚æ•°ä¸­è®¾ç½®äº†é”™è¯¯çš„<code>root</code>åˆ†åŒºä½ç½®</h4><p>PYNQé»˜è®¤æ€»æ˜¯ä»<code>/dev/mmcblk0</code>ï¼ˆè¿™ä¸ªè·¯å¾„æ˜¯PYNQä¸Šçš„ï¼Œä¸æ˜¯ä½ çš„å®¿ä¸»Ubuntuä¸Šçš„ï¼‰å¯åŠ¨ç³»ç»Ÿï¼Œå³å®ƒå¦‚æœå®ƒæœ‰å¤šä¸ªSDå¤–è®¾çš„è¯ï¼ŒSDå¡è¦è¿åœ¨<code>PS_SD0</code>ä¸Šã€‚ä¸å¹¸çš„æ˜¯ï¼ŒEdgeBoardè¿˜çœŸçš„æœ‰ä¸¤ä¸ªSDè®¾å¤‡ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬çš„TFå¡æ§½ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸€é¢—eMMC FlashèŠ¯ç‰‡ã€‚é»˜è®¤æƒ…å½¢ä¸‹ï¼ŒPYNQæ€»æ˜¯ä¼šå°è¯•ä»åè€…å¯åŠ¨ï¼Œè€Œæˆ‘ä»¬çš„ç³»ç»Ÿå®é™…å­˜æ”¾åœ¨SDå¡ä¸Šã€‚</p><p>PetaLinuxçš„Bootå‚æ•°æ˜¯é€šè¿‡è®¾å¤‡æ ‘ä¸­çš„<code>/chosen/bootargs</code>æ¡ç›®è¿›è¡Œé…ç½®çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€åé•œåƒä½¿ç”¨çš„è®¾å¤‡æ ‘ä¸­è¯¥æ¡ç›®ä¼šæ˜¯è¿™æ ·çš„ï¼ˆæ¯ä¸ªå­—æ®µçš„å…ˆåé¡ºåºä¸é‡è¦ï¼‰ï¼š</p><figure class="highlight plaintext"><figcaption><span>system-user.dtsi</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bootargs = &quot;root=/dev/mmcblk0p2 rw earlyprintk rootfstype=ext4 rootwait devtmpfs.mount=1 uio_pdrv_genirq.of_id=\&quot;generic-uio\&quot; clk_ignore_unused&quot;;</span><br></pre></td></tr></table></figure><p>ä½†æˆ‘ä»¬å¸Œæœ›å…¶ä¸­çš„å­—æ®µ<code>root=/dev/mmcblk0p2</code>å˜æˆ<code>root=/dev/mmcblk1p2</code>ã€‚ç›´è§‰ä¸Šï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯å¾ˆä¸Šæ–‡ä¸€æ ·ä¿®æ”¹<code>system-user.dtsi</code>æ–‡ä»¶ï¼Œä»è€Œå½±å“æœ€ç»ˆç”Ÿæˆçš„è®¾å¤‡æ ‘ã€‚å®éªŒä¼šå‘Šè¯‰ä½ å®Œå…¨ä¸èµ·ä½œç”¨ï¼Œæœ€åè¾“å‡ºä¹Ÿå°±æ˜¯å®é™…ä½¿ç”¨çš„è®¾å¤‡æ ‘é‡Œè¿˜æ˜¯ä¸Šé¢è¿™è¡Œé»˜è®¤å€¼ã€‚è¿™é‡Œå¤§å®¶å°±ä¼šé‡åˆ°PYNQè¿™ä¸ªç¼–è¯‘æµç¨‹è®¾è®¡çš„å¾ˆç³Ÿç³•çš„ä¸€ç‚¹ï¼š<code>system-user.dtsi</code>è¿™ä¸ªæ–‡ä»¶ä¸­çš„åªæœ‰ä¸€éƒ¨åˆ†ä¼šèµ·ä½œç”¨ï¼Œè‡³äºæƒ³å¼„æ¸…å“ªéƒ¨åˆ†ï¼Œè¦ä¹ˆåšå®éªŒï¼Œè¦ä¹ˆçœ‹æ‡‚ç¼–è¯‘æºä»£ç ã€‚æ¯”å¦‚ä¸Šé¢å¯¹<code>&amp;sdhci1</code>èŠ‚ç‚¹çš„ä¿®æ”¹å°±èƒ½ç”Ÿæ•ˆï¼Œå¯¹<code>/chosen/bootargs</code>å¯¹ä¿®æ”¹å°±ä¸èµ·ä½œç”¨ã€‚</p><p>ç”Ÿæˆè®¾å¤‡æ ‘æ˜¯åˆ¶ä½œBSPæ–‡ä»¶çš„ä¸­ä¸€éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å¼„æ¸…æ¥šPYNQæ˜¯å¦‚ä½•ç”Ÿæˆæœ€ç»ˆçš„BSPæ–‡ä»¶çš„ã€‚æˆ‘ä»¬å…ˆè€ƒè™‘ç”¨æˆ·æ²¡æœ‰æä¾›é¢„ç¼–è¯‘çš„BSPæ–‡ä»¶çš„æƒ…å½¢ï¼Œæ­¤æ—¶PYNQå†…éƒ¨ä¼šä¾æ¬¡åšè¿™äº›äº‹ï¼š</p><ol><li>å»ºç«‹ä¸€ä¸ªç©ºçš„PetaLinuxé¡¹ç›®</li><li>æ‹·è´ç”¨æˆ·çš„<code>petalinux_bsp/meta-user</code>åˆ°è¯¥é¡¹ç›®ä¸‹ï¼›</li><li>è¯»å…¥ç¡¬ä»¶é…ç½®å³<code>petalinux_bsp/hardware_project</code>ä¸­çš„XSAæ–‡ä»¶ï¼Œç”ŸæˆConfigæ–‡ä»¶ï¼›</li><li>æ„å»ºå¹¶æ‰“åŒ…æˆBSPæ–‡ä»¶ï¼›</li><li>åˆ©ç”¨ä¸Šä¸€æ­¥è·å¾—çš„BSPæ–‡ä»¶å»ºç«‹ä¸€ä¸ªæ–°çš„PetaLinuxé¡¹ç›®ï¼›</li><li>ç›´æ¥åœ¨è„šæœ¬ä¸­ä¿®æ”¹Configæ–‡ä»¶ï¼ŒåŠ å…¥ä¸€äº›é…ç½®ï¼›</li><li>é‡æ–°è¿è¡Œ<code>petalinux-config</code>ç”Ÿæˆæ–°çš„Configæ–‡ä»¶ï¼›</li><li>å¼€å§‹å„ç§buildï¼Œæœ€ç»ˆç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„BOOT.binã€‚</li></ol><p>å…¶ä¸­æ­¥éª¤1ã€2ã€3ã€4åœ¨<code>sdbuild/scripts/create_bsp.sh</code>è„šæœ¬ä¸­è¿›è¡Œï¼Œæ­¥éª¤5ã€6ã€7ã€8åœ¨<code>sdbuild/Makefile</code>ä¸­è¿›è¡Œã€‚å¦‚æœç”¨æˆ·æŒ‡å®šäº†é¢„ç¼–è¯‘çš„BSPæ–‡ä»¶ï¼Œå°±æŠŠä¸Šæ–‡ä¸­çš„ç¬¬1æ­¥æ¢æˆâ€œåˆ©ç”¨ç”¨æˆ·æä¾›çš„BSPæ–‡ä»¶å»ºç«‹ä¸€ä¸ªæ–°çš„PetaLinuxé¡¹ç›®â€ã€‚è¿™é‡Œæœ€ä»¤äººå›°æƒ‘çš„åœ°æ–¹æ˜¯ï¼Œä¸ºä»€ä¹ˆè¦è¿›è¡Œä¸¤æ¬¡â€œcreate-config-buildâ€çš„æµç¨‹ï¼Œè‡³å°‘æˆ‘æ²¡æœ‰çœ‹å‡ºå®ƒè¿™ä¹ˆåšçš„å¿…è¦æ€§ã€‚è¿™æ ·ä¸€é€šæ“ä½œä¹‹åï¼Œç”¨æˆ·åœ¨<code>petalinux_bsp/meta-user</code>çš„å­ç›®å½•ä¸‹çš„<code>system-user.dtsi</code>æ–‡ä»¶ä¸­ä¿®æ”¹çš„ä¸€äº›è®¾å¤‡æ ‘èŠ‚ç‚¹ï¼ˆå¯¹åº”ä¸Šæ–‡æ­¥éª¤2ï¼‰ï¼Œä¼šåœ¨æ­¥éª¤6ä¸­è¢«æ–°å¼•å…¥çš„ä¸€äº›è®¾å¤‡æ ‘æ–‡ä»¶å†²åˆ·æ‰ã€‚æ­¥éª¤6é€šè¿‡<code>CONFIG_USER_LAYER_0</code>è¿™ä¸€è®¾ç½®æ··å…¥äº†ä¸€äº›æ–°çš„è®¾å¤‡æ ‘æ–‡ä»¶ï¼Œè¿™äº›é¢å¤–çš„è®¾å¤‡æ ‘æ–‡ä»¶ä½äº<code>sdbuild/boot/meta-pynq/recipes-bsp/device-tree</code>ã€‚å°±Bootå‚æ•°è€Œè¨€ï¼Œè¿™é‡Œè¾¹çš„<code>pynq_bootargs.dtsi</code>æ–‡ä»¶æä¾›äº†å‰è¿°çš„é»˜è®¤<code>/chosen/bootargs</code>ã€‚å› æ­¤æ— è®ºæˆ‘ä»¬åœ¨<code>system-user.dtsi</code>æ–‡ä»¶ä¸­å¦‚ä½•ä¿®æ”¹<code>/chosen/bootargs</code>ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è¦†ç›–æ‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œä¿®æ”¹ä¸‹è¯¥æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„<code>root=/dev/mmcblk0p2</code>å˜æˆ<code>root=/dev/mmcblk1p2</code>ã€‚å› ä¸ºè¿™ä¸ªæ–‡ä»¶åªæœ‰å‡ è¡Œï¼Œæ”¹åŠ¨ä¹Ÿå¾ˆå°ï¼Œæˆ‘å°±ä¸æŠŠä»£ç è´´å‡ºæ¥äº†ã€‚</p><p>é™¤äº†ä¿®æ”¹<code>pynq_bootargs.dtsi</code>ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹<code>sdbuild/Makefile</code>ï¼Œå°†ä¸‹é¢è¿™è¡Œä»£ç ä¸­çš„<code>mmcblk0p2</code>å˜æˆ<code>mmcblk1p2</code>ã€‚</p><figure class="highlight bash"><figcaption><span>Makefile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;CONFIG_SUBSYSTEM_SDROOT_DEV=&quot;/dev/mmcblk0p2&quot;&#x27;</span> &gt;&gt; $$(PL_CONFIG_<span class="variable">$1</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘è¿™é‡Œæä¾›å¦ä¸€ä¸ªæœ‰è¶£çš„æ€è·¯ï¼Œ<code>sdhci0</code>å’Œ<code>sdhci1</code>åœ¨è®¾å¤‡æ ‘æ–‡ä»¶ä¸­æ˜¯ä¿©aliasï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¾å¤‡æ ‘ä¸­äº¤æ¢å®ƒä»¬çš„å€¼ï¼ˆ<code>/amba/mmc@ff160000</code>å’Œ<code>/amba/mmc@ff170000</code>ï¼‰ã€‚ä¸è¿‡æˆ‘æ²¡æœ‰åšè¿‡å®éªŒã€‚</p><!-- æ ‡å‡†çš„PetaLinuxé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡`petalinux-config`çš„GUIé…ç½®ç•Œé¢ --><h3 id="UARTä¸²å£ä¸å·¥ä½œ"><a href="#UARTä¸²å£ä¸å·¥ä½œ" class="headerlink" title="UARTä¸²å£ä¸å·¥ä½œ"></a>UARTä¸²å£ä¸å·¥ä½œ</h3><p>EdgeBoard FZ3Aæœ‰ä¸¤ä¸ªUARTä¸²å£ï¼Œä¸€ä¸ªæ˜¯BT1120è¿æ¥ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œå¦ä¸€ä¸ªè½¬æˆäº†USBæ¥å£ã€‚æˆ‘ä»¬ç”¨æ¥è¿æ¥ç”µè„‘è¿›è¡Œäº¤äº’çš„ä¸²å£ï¼Œæ˜¾ç„¶å¸Œæœ›æ˜¯åè€…ã€‚å’Œå‰é¢SDå¡çš„æƒ…å†µç›¸ä¼¼ï¼ŒPYNQé»˜è®¤PS_UART0ä½œä¸ºè¾“å‡ºä¸²å£ï¼Œè€Œæˆ‘ä»¬å®é™…æƒ³è¦çš„æ˜¯PS_UART1ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨ä¸Šé¢ä¿®æ”¹<code>CONFIG_SUBSYSTEM_SDROOT_DEV</code>çš„é‚£è¡Œåé¢åŠ ä¸Šä»¥ä¸‹å‡ è¡Œï¼š</p><figure class="highlight bash"><figcaption><span>Makefile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;CONFIG_SUBSYSTEM_PMUFW_SERIAL_PSU_UART_1_SELECT=y&#x27;</span> &gt;&gt; $$(PL_CONFIG_<span class="variable">$1</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;CONFIG_SUBSYSTEM_FSBL_SERIAL_PSU_UART_1_SELECT=y&#x27;</span> &gt;&gt; $$(PL_CONFIG_<span class="variable">$1</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;CONFIG_SUBSYSTEM_ATF_SERIAL_PSU_UART_1_SELECT=y&#x27;</span> &gt;&gt; $$(PL_CONFIG_<span class="variable">$1</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;CONFIG_SUBSYSTEM_SERIAL_PSU_UART_1_SELECT=y&#x27;</span> &gt;&gt; $$(PL_CONFIG_<span class="variable">$1</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;CONFIG_SUBSYSTEM_PRIMARY_SD_PSU_SD_1_SELECT=y&#x27;</span> &gt;&gt; $$(PL_CONFIG_<span class="variable">$1</span>)</span><br></pre></td></tr></table></figure><h3 id="dash-preinstæ‰¾ä¸åˆ°"><a href="#dash-preinstæ‰¾ä¸åˆ°" class="headerlink" title="dash.preinstæ‰¾ä¸åˆ°"></a><code>dash.preinst</code>æ‰¾ä¸åˆ°</h3><p>RootFSçš„ç¼–è¯‘è„šæœ¬ï¼ˆå³<code>create_rootfs.sh</code>ï¼‰ä¼šåœ¨å‰é¢æåˆ°çš„<code>postinst1.sh</code>å’Œ<code>postinst2.sh</code>ä¸¤ä¸ªè„šæœ¬æ‰§è¡Œä¸­æç¤º<code>dash.preinst</code>æ‰§è¡Œå¤±è´¥ï¼ŒåŸå› æ˜¯<code>/var/lib/dpkg/info/dash.preinst</code>æ‰¾ä¸åˆ°ã€‚è¯¥é”™è¯¯çš„åŸå› ä»…ä»…æ˜¯ä¸Šæ¸¸å·²ç»æŠŠ<code>dash.preinst</code>è¿™ä¸ªè„šæœ¬åˆ é™¤äº†ï¼ˆå¯å‚è€ƒ<a href="https://unix.stackexchange.com/questions/558844/no-var-lib-dpkg-info-dash-preinst-in-buster">æ­¤æ–‡</a>ï¼‰ã€‚å› æ­¤è¿™é‡Œæ‰§è¡Œè¯¥è„šæœ¬çš„ä¸‰è¡Œä»£ç éƒ½æ˜¯å¤šä½™çš„ï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚å³ä½¿ä¸åˆ é™¤ï¼Œå®ƒä»¬ä¹Ÿåº”å½“ä¸ä¼šå¼•èµ·å…¶ä»–å¼‚å¸¸ï¼ˆé™¤äº†åœ¨ç»ˆç«¯é‡Œè¾“å‡ºä¸€äº›é”™è¯¯ä¿¡æ¯ï¼‰ã€‚</p><h3 id="RootFSåˆ†åŒºç£ç›˜å®¹é‡ä¸è¶³"><a href="#RootFSåˆ†åŒºç£ç›˜å®¹é‡ä¸è¶³" class="headerlink" title="RootFSåˆ†åŒºç£ç›˜å®¹é‡ä¸è¶³"></a>RootFSåˆ†åŒºç£ç›˜å®¹é‡ä¸è¶³</h3><p>PYNQåœ¨ç¼–è¯‘çš„æœ€åï¼Œä¼šå¯¹æœ€ç»ˆçš„é•œåƒçš„RootFSåˆ†åŒºè¿›è¡Œæ‰©å®¹ã€‚æ‰©å®¹ä¸»è¦æ˜¯å¢åŠ ä¸€äº›ç”¨æˆ·ç©ºé—´ï¼Œä»¥åŠç»™æ“ä½œç³»ç»Ÿæœ¬èº«è…¾å‡ºä¸€äº›åœ°æ–¹æ”¾ä¸´æ—¶æ–‡ä»¶ã€‚æ‰©å®¹æ“ä½œæ˜¯åœ¨<code>sdbuild/scripts/resize_umount.sh</code>è„šæœ¬ä¸­è¿›è¡Œï¼ˆåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆæ–‡ä»¶åä¸­unmountæ‹¼å†™é”™äº†ï¼Œæºä»£ç å¦‚æ­¤ï¼‰ã€‚PYNQçš„å¼€å‘è€…å¾ˆå¯èƒ½æ˜¯ä¸ºäº†å°½é‡ä½¿æœ€ç»ˆé•œåƒå°äº8GBï¼Œæ‰€ä»¥åªé¢å¤–æ‰©å®¹äº†300MBã€‚</p><p>å¾ˆä¸å¹¸çš„æ˜¯ï¼Œè¿™300MBå®åœ¨æ˜¯æ‰è¥Ÿè§è‚˜ï¼Œç»å¸¸å¼€å®Œæœºå°±ç”¨å¾—ä¸ƒä¸ƒå…«å…«äº†ã€‚æç«¯æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¸è¶³ä»¥æ”¯æ’‘JupyteræˆåŠŸè¿è¡Œï¼Œç°è±¡æ˜¯èƒ½å¤Ÿsshè®¿é—®ï¼Œä½†æµè§ˆå™¨å®Œå…¨æ‰“ä¸å¼€Jupyterã€‚æ’æŸ¥æ–¹æ³•æ˜¯ï¼Œä¸Šç”µåé€šè¿‡sshè¿›å…¥æ¿ä¸Šçš„æ“ä½œç³»ç»Ÿï¼Œæ‰§è¡Œ<code>df</code>ï¼Œè§‚å¯Ÿ<code>/</code>åˆ†åŒºçš„ç£ç›˜å ç”¨æƒ…å†µã€‚</p><p>æˆ‘çš„SDå¡æ˜¯64GBçš„ï¼Œå› æ­¤ï¼Œæˆ‘ç›´æ¥ä¿®æ”¹äº†<code>resize_umount.sh</code>è„šæœ¬ï¼Œå°†æ‰©å®¹ç©ºé—´ä»300MBæ”¹æˆäº†3000MBã€‚ä½ å¯ä»¥æ ¹æ®ä½ çš„SDå¡å®¹é‡è‡ªç”±å‘æŒ¥ï¼Œå½“ç„¶æ²¡å¿…è¦å¤ªå¤§ï¼Œå¦åˆ™çƒ§å†™SDå¡ä¼šå˜å¾—å¾ˆæ…¢ã€‚å…·ä½“åˆ°ä»£ç ä¸Šï¼Œåœ¨è¯¥è„šæœ¬ä¸­æ‰¾åˆ°ä¸‹é¢ä¸€è¡Œä»£ç ï¼ŒæŠŠå…¶ä¸­çš„300æ”¹æˆä»»æ„ä½ æƒ³è¦çš„æ•°å­—ã€‚</p><figure class="highlight bash"><figcaption><span>Makefile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_size=$(( <span class="variable">$used_size</span> + (<span class="number">300</span> * <span class="number">1024</span>) ))</span><br></pre></td></tr></table></figure><h3 id="å„ç§æ–‡ä»¶ä¸‹è½½å¤±è´¥"><a href="#å„ç§æ–‡ä»¶ä¸‹è½½å¤±è´¥" class="headerlink" title="å„ç§æ–‡ä»¶ä¸‹è½½å¤±è´¥"></a>å„ç§æ–‡ä»¶ä¸‹è½½å¤±è´¥</h3><p>å¤šæ•°éƒ½æ˜¯ç½‘ç»œç¯å¢ƒçš„é—®é¢˜ï¼Œå¯ä»¥å…ˆé˜…è¯»ä¸‹ä¸€èŠ‚ã€‚å¦‚æœè¿˜æ˜¯è§£å†³ä¸äº†çš„è¯ï¼Œè¯·è”ç³»å…¬å¸çš„ITå·¥ç¨‹å¸ˆååŠ©è§£å†³ã€‚</p><h2 id="Speedupï¼ç¼–è¯‘æé€Ÿ"><a href="#Speedupï¼ç¼–è¯‘æé€Ÿ" class="headerlink" title="Speedupï¼ç¼–è¯‘æé€Ÿ"></a>Speedupï¼ç¼–è¯‘æé€Ÿ</h2><p>åœ¨æˆ‘çš„ç ´ç¬”è®°æœ¬ä¸Šï¼Œå®Œæ•´çš„ä¸€æ¬¡PYNQæµç¨‹éœ€è¦æ•´ä¸€ä¸ªä¸‹åˆï¼Œä¸­é—´è¿˜éœ€è¦å¤šæ¬¡è¾“å…¥ç®¡ç†å‘˜å¯†ç ã€‚å› ä¸ºæˆ‘ä»¬å¾ˆéš¾ä¸€æ¬¡æˆåŠŸï¼Œæ‰€ä»¥éœ€è¦ä¸æ–­åœ°é‡æ–°è¿›è¡Œç¼–è¯‘æµç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ€»å¸Œæœ›æ•´ä¸ªç¼–è¯‘èƒ½å¤Ÿè¿›è¡Œåœ°å¿«ä¸€äº›ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹ç€æ‰‹åŠ é€Ÿç¼–è¯‘æµç¨‹ã€‚</p><h3 id="è·³è¿‡è¾“å…¥ç®¡ç†å‘˜å¯†ç "><a href="#è·³è¿‡è¾“å…¥ç®¡ç†å‘˜å¯†ç " class="headerlink" title="è·³è¿‡è¾“å…¥ç®¡ç†å‘˜å¯†ç "></a>è·³è¿‡è¾“å…¥ç®¡ç†å‘˜å¯†ç </h3><p>PYNQç¼–è¯‘ä¸­ä¼šé¢‘ç¹ä½¿ç”¨<code>sudo</code>å‘½ä»¤ï¼Œéœ€è¦æˆ‘ä»¬ä¸æ–­åœ°è¾“å…¥å¯†ç ï¼Œå¦åˆ™ç¨‹åºå°±ä¸€ç›´å¡åœ¨é‚£ç­‰å¾…ã€‚Ubuntué»˜è®¤ä¸¤æ¬¡<code>sudo</code>çš„æ—¶é—´é—´éš”è¶…è¿‡15åˆ†é’Ÿå·¦å³å°±è¦é‡æ–°è¾“å…¥å¯†ç ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ—¶é—´å»¶é•¿ä¸€äº›ï¼ˆæ¯”å¦‚è¿™é‡Œæˆ‘å»¶é•¿åˆ°äº†2å°æ—¶ï¼‰ã€‚</p><p>é¦–å…ˆåœ¨<code>/etc/sudoers</code>ä¸­æ‰¾åˆ°å¦‚ä¸‹ä¸€è¡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Defaults    env_reset</span><br></pre></td></tr></table></figure><p>å°†å®ƒæ”¹æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Defaults    env_reset,timestamp_timeout=120</span><br></pre></td></tr></table></figure><h3 id="ä¸ºMultistrapæ›´æ¢ä¸‹è½½æº"><a href="#ä¸ºMultistrapæ›´æ¢ä¸‹è½½æº" class="headerlink" title="ä¸ºMultistrapæ›´æ¢ä¸‹è½½æº"></a>ä¸ºMultistrapæ›´æ¢ä¸‹è½½æº</h3><p>Multistrapåˆ©ç”¨aptä¸‹è½½å„ç§éœ€è¦çš„åŒ…æ¥æ„å»ºRootFSã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œaptä¼šä»å®˜æ–¹portsæºï¼ˆ<code>http://ports.ubuntu.com/ubuntu-ports</code>ï¼‰ä¸‹è½½æ–‡ä»¶ï¼Œæ—¶é—´å¾ˆé•¿ä¸”ç»å¸¸å¤±è´¥ã€‚æ¢æºçš„æ–¹æ³•éå¸¸æ–¹ä¾¿ï¼Œç›´æ¥åœ¨ç¼–è¯‘å¼€å§‹å‰å£°æ˜<code>PYNQ_UBUNTU_REPO</code>ç¯å¢ƒå˜é‡å³å¯ã€‚ä¾‹å¦‚æ¢æˆæ¸…åæºï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ <span class="built_in">export</span> PYNQ_UBUNTU_REPO=http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œå¿…é¡»æ˜¯<code>http</code>è€Œä¸æ˜¯<code>https</code>ã€‚</p><h3 id="ä¸ºCrossTool-NGå»ºç«‹æœ¬åœ°ç¼“å­˜"><a href="#ä¸ºCrossTool-NGå»ºç«‹æœ¬åœ°ç¼“å­˜" class="headerlink" title="ä¸ºCrossTool-NGå»ºç«‹æœ¬åœ°ç¼“å­˜"></a>ä¸ºCrossTool-NGå»ºç«‹æœ¬åœ°ç¼“å­˜</h3><p>CrossTool-NGæ¯æ¬¡è¿è¡Œæ—¶ä¼šä»äº‘ç«¯ä¸‹è½½å¾ˆå¤šåŒ…ï¼ˆä¸»è¦æ˜¯å„ç§æºä»£ç ï¼‰ã€‚æ ¹æ®å…¶æ–‡æ¡£çš„æŒ‡ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªæœ¬åœ°çš„ç¼“å­˜æ–‡ä»¶å¤¹ã€‚å½“éœ€è¦ä¸‹è½½çš„åŒ…æœ¬åœ°å·²ç»ç¼“å­˜æ—¶ï¼Œå®ƒå°±ä¼šè·³è¿‡ä¸‹è½½ï¼Œä»è€ŒèŠ‚çœæ—¶é—´ã€‚CrossTool-NGçš„é…ç½®æ–‡ä»¶åœ¨<code>sdbuild/packages/gcc-mb/samples/&lt;compile_targets&gt;/crosstool.config</code>ï¼Œåœ¨å…¶æœ€ååŠ ä¸Šä¸¤è¡Œï¼š</p><figure class="highlight plaintext"><figcaption><span>crosstool.config</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CT_SAVE_TARBALLS=y</span><br><span class="line">CT_LOCAL_TARBALLS_DIR=&lt;somewhere_to_put_downloaded_files&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¯·åœ¨è¿è¡Œå‰ä¿è¯è¯¥è·¯å¾„æ˜¯ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸”å…·æœ‰è¯»å†™æƒé™ã€‚</p><h3 id="ä¸ºPetaLinuxå»ºç«‹æœ¬åœ°SSTATEç¼“å­˜"><a href="#ä¸ºPetaLinuxå»ºç«‹æœ¬åœ°SSTATEç¼“å­˜" class="headerlink" title="ä¸ºPetaLinuxå»ºç«‹æœ¬åœ°SSTATEç¼“å­˜"></a>ä¸ºPetaLinuxå»ºç«‹æœ¬åœ°SSTATEç¼“å­˜</h3><p>é¦–å…ˆå»<a href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools/2020-2.html">Xilinxå®˜ç½‘</a>ä¸‹è½½sstate-cacheæ–‡ä»¶ã€‚æ³¨æ„ç‰ˆæœ¬è¦å’ŒPetaLinuxä¿æŒä¸€è‡´ï¼ˆæœ¬æ–‡ä¸­æˆ‘ä»¬ç”¨çš„æ˜¯2020.2ï¼‰ã€‚</p><p>å› ä¸ºEdgeBoard FZ3Aæ¿è½½çš„ZynqèŠ¯ç‰‡æ˜¯ARM64æ¶æ„ï¼Œå› æ­¤ä¸ºäº†èŠ‚çº¦ç©ºé—´ï¼Œå°±åªä¸‹è½½â€œaarch64 sstate-cacheâ€å’Œâ€œdownloadsâ€ä¸¤ä¸ªåŒ…ï¼ˆåŠ èµ·æ¥ä¹Ÿè¶…è¿‡60GBäº†ï¼‰ã€‚ç„¶åæˆ‘ä»¬å°†å®ƒä»¬è§£å‹ç¼©ï¼Œå¹¶æŠŠè·¯å¾„æ·»åŠ åˆ°<code>petalinux_bsp/meta-user/conf/petalinuxbsp.conf</code>ï¼š</p><figure class="highlight bash"><figcaption><span>petalinuxbsp.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DL_DIR = <span class="string">&quot;&lt;sstate_extract_dir&gt;/2020.2/downloads&quot;</span></span><br><span class="line">SSTATE_DIR = <span class="string">&quot;&lt;sstate_extract_dir&gt;/2020.2/sstate-cache/aarch64&quot;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤boardsç›®å½•ä¸‹Pynq-Z2ä»¥å¤–çš„å¼€å‘æ¿"><a href="#åˆ é™¤boardsç›®å½•ä¸‹Pynq-Z2ä»¥å¤–çš„å¼€å‘æ¿" class="headerlink" title="åˆ é™¤boardsç›®å½•ä¸‹Pynq-Z2ä»¥å¤–çš„å¼€å‘æ¿"></a>åˆ é™¤<code>boards</code>ç›®å½•ä¸‹Pynq-Z2ä»¥å¤–çš„å¼€å‘æ¿</h3><p>å› ä¸ºæˆ‘ä»¬çš„ç¼–è¯‘ç›®æ ‡æ˜¯EdgeBoard FZ3Aï¼Œæ‰€ä»¥<code>boards</code>ç›®å½•ä¸‹çš„<code>Pynq-Z1</code>ã€<code>Pynq-Z2</code>ã€<code>ZCU104</code>ä¸‰ä¸ªç›®å½•å¯¹æˆ‘ä»¬æ¥è¯´å°±æ˜¯å¤šä½™çš„ã€‚ç„¶è€ŒPYNQåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šéå†<code>boards</code>ç›®å½•ä¸‹çš„å„ä¸ªå¼€å‘æ¿å¹¶è¯•å›¾ç”Ÿæˆæ¯”ç‰¹æµæ–‡ä»¶ã€‚å…¶ä¸­<code>Pynq-Z2</code>çš„è¾“å‡ºä¼šåœ¨<code>pynq</code>è‡ªèº«ç¼–è¯‘æ—¶ç”¨åˆ°ï¼Œå¦å¤–ä¸¤ä¸ªå¼€å‘æ¿çš„ç›¸å…³æ–‡ä»¶çš„ç¼–è¯‘çº¯å±æ˜¯æµªè´¹æ—¶é—´ï¼ˆå…³é”®æ˜¯è¿™æ­¥è¿˜ç‰¹åˆ«è´¹æ—¶ï¼‰ï¼Œæˆ‘æ€€ç–‘è¿™æ˜¯ä¸ªbugã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†<code>Pynq-Z1</code>ã€<code>ZCU104</code>ä¸¤ä¸ªæ–‡ä»¶å¤¹åˆ é™¤ã€‚</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ <span class="built_in">cd</span> &lt;pynq_repo_dir&gt;</span><br><span class="line">â¯ <span class="built_in">rm</span> -rf boards/Pynq-Z1 boards/ZCU104</span><br></pre></td></tr></table></figure><p>å®Œæˆä¹‹åï¼ŒåŠ¡å¿…è¦æäº¤åˆ°æœ¬åœ°çš„Gitç‰ˆæœ¬å†å²ä¸­ï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ï¼ˆè¿™æ˜¯å› ä¸ºä½œè€…ç”¨<code>git clone</code>ä»£æ›¿äº†<code>cp</code>ï¼‰ã€‚</p><h3 id="è·³è¿‡boards-Pynq-Z2ä¸­å„ä¸ªOverlayç”Ÿæˆæ¯”ç‰¹æµ"><a href="#è·³è¿‡boards-Pynq-Z2ä¸­å„ä¸ªOverlayç”Ÿæˆæ¯”ç‰¹æµ" class="headerlink" title="è·³è¿‡boards/Pynq-Z2ä¸­å„ä¸ªOverlayç”Ÿæˆæ¯”ç‰¹æµ"></a>è·³è¿‡<code>boards/Pynq-Z2</code>ä¸­å„ä¸ª<code>Overlay</code>ç”Ÿæˆæ¯”ç‰¹æµ</h3><p><code>pynq</code>ä½œä¸ºä¸€ä¸ªPythonçš„åŒ…ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ˜¯è¦å’Œå…¶ä»–packagesä¸€èµ·å®‰è£…åˆ°é•œåƒä¸­çš„ã€‚è¿›è¡Œè¿™ä¸€æ­¥æ—¶ï¼Œå®ƒä¼šå°†Pynqçš„æœ¬åœ°repoå…ˆå¤åˆ¶åˆ°<code>sdbuild/build/PYNQ</code>ä¸­ï¼Œç„¶åå†è¿è¡Œå…¶ä¸­çš„<code>build.sh</code>ã€‚è§‚å¯Ÿè¿™ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PYNQåœ¨ç¼–è¯‘<code>Pynq-Z2/logictools</code>å’Œ<code>Pynq-Z2/base</code>ä¸¤ä¸ª<code>Overlay</code>æ–‡ä»¶å¤¹æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥å…¶ä¸­æ˜¯å¦å·²å­˜åœ¨åŒåçš„<code>.bit</code>ã€<code>.hwh</code>ã€<code>.xsa</code>æ–‡ä»¶ï¼Œå­˜åœ¨çš„è¯å°±è·³è¿‡ç”Ÿæˆæ¯”ç‰¹æµçš„è¿‡ç¨‹ï¼ˆå³ç»¼åˆã€å¸ƒå±€å¸ƒçº¿ç­‰ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŒ‰ç…§æ­£å¸¸æµç¨‹<code>make BOARDDIR=... BOARDS=...</code>ï¼Œç„¶åæŠŠç”Ÿæˆçš„ç›¸å…³æ–‡ä»¶æ‹·è´åˆ°åŸå§‹çš„<code>boards/Pynq-Z2</code>ç›®å½•ä¸­çš„å¯¹åº”æ–‡ä»¶å¤¹ä¸‹ï¼š</p><figure class="highlight bash"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶.xsaæ–‡ä»¶ï¼Œ.bit/.hwhæ–‡ä»¶ç±»ä¼¼å¤„ç†</span></span><br><span class="line">â¯ <span class="built_in">cp</span> &lt;pynq_repo_dir&gt;/sdbuild/build/PYNQ/boards/Pynq-Z2/logictools/logictools.xsa &lt;pynq_repo_dir&gt;/boards/Pynq-Z2/logictools/</span><br><span class="line">â¯ <span class="built_in">cp</span> &lt;pynq_repo_dir&gt;/sdbuild/build/PYNQ/boards/Pynq-Z2/base/base.xsa &lt;pynq_repo_dir&gt;/boards/Pynq-Z2/base/</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„è·¯å¾„ï¼Œæ˜¯ä»<code>sdbuild/build</code>ä¸­çš„<code>PYNQ</code>å¤åˆ¶åˆ°åŸå§‹çš„<code>PYNQ</code>ã€‚å’Œå‰é¢ä¸€æ ·ï¼Œè¦æäº¤åˆ°Gitç‰ˆæœ¬å†å²ä¸­æ‰ä¼šç”Ÿæ•ˆã€‚</p><p>å¦å¤–ï¼Œç»è¿‡å®éªŒè¯æ˜ï¼Œè¿™é‡Œ<code>.xsa</code>å’Œ<code>.bit</code>æ–‡ä»¶éœ€è¦æ˜¯åŒä¸€æ¬¡ç¼–è¯‘ä¸­äº§ç”Ÿï¼Œå¦åˆ™ä¼šå‘ç”Ÿä¸€äº›å¥‡æ€ªä¸”éš¾ä»¥å®šä½çš„é”™è¯¯ã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æ­å»ºè¿™ä¸ªä¸ªäººåšå®¢ä¹Ÿæœ‰å‡ å¹´äº†ï¼Œæœ¬æƒ³é—²æš‡æ—¶å†™äº›æŠ€æœ¯æ–‡ç« ï¼Œä½†æ²¡èƒ½æŒä¹‹ä»¥æ’åœ°ä¿æŒè¾“å‡ºã€‚ä¸­é—´ä¹Ÿæ›¾æ–­æ–­ç»­ç»­å†™è¿‡ä¸€äº›è®ºæ–‡é˜…è¯»ç¬”è®°ï¼Œä½†éƒ½æ²¡æœ‰åšæŒä¸‹æ¥ã€‚ä¸€æ–¹é¢æ˜¯å› ä¸ºæ€»æ‹…å¿ƒè‡ªå·±ç²—æµ…çš„ä¸“ä¸šè®¤è¯†è´»ç¬‘å¤§æ–¹ï¼Œå¦ä¸€æ–¹é¢æ˜¯å®éªŒå®¤çš„é¡¹ç›®ä¹Ÿç¡®å®ä¸å¤ªåˆé€‚ä½œä¸ºå†™ä½œç´ æï¼Œä¾¿ä¸€ç›´æ²¡æœ‰åŠ¨ç¬”ã€‚EdgeBoardçš„äº‹æƒ…æˆ‘åœ¨å»å¹´COVIDç–«æƒ…æœŸé—´åŠ¨å·¥åå°±ä¸€ç›´æç½®äº†ï¼Œç»“æœå‘ç°æœ€è¿‘æœ‰ä¸å°‘äººå…³å¿ƒè¿™ä¸ªäº‹æƒ…ï¼Œå°±èŠ±äº†äº›æ—¶é—´ç®—æ˜¯ç»™å®ƒç”»äº†ä¸ªå¥å·ã€‚æˆ‘ä¹Ÿä»¥æ­¤ä¸ºå¥‘æœºï¼Œæèµ·äº†ç¬”è®°å½•ä¸‹æ•´ä¸ªè¿‡ç¨‹ã€‚å¸Œæœ›èƒ½å¤Ÿå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;PYNQæ˜¯æˆ‘å¾ˆå–œæ¬¢çš„ä¸€ä¸ªFPGAå¼€æºå·¥å…·ã€‚å®ƒå°†Zynqä¸Šçš„å„ç§ç¡¬ä»¶èµ„æºç”¨Pythonå°è£…äº†èµ·æ¥ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡Jupytor Notebookè¿œç¨‹è°ƒè¯•FPGAã€‚å°†PYNQç§»æ¤åˆ°Baidu EdgeBoardä¸Šæ˜¯æˆ‘å»å¹´åœ¨COVIDç–«æƒ…æœŸé—´å¼€çš„å‘ï¼ˆå…·ä½“è¯·å‚çœ‹&lt;a href=&quot;https://github.com/zhutmost/edgeboard&quot;&gt;æˆ‘çš„GitHub&lt;/a&gt;ï¼‰ï¼Œä½†ä¸­é—´é‡åˆ°çš„å°é—®é¢˜æœ‰ç‚¹å¤šï¼Œä¾¿ä¸€ç›´æ²¡æœ‰å®Œå…¨å¡«ä¸Šã€‚æˆ‘æœ€è¿‘æŠ½å‡ºäº†äº›æ—¶é—´é‡æ–°æ‹¾èµ·äº†è¿™ä¸ªäº‹æƒ…ï¼Œå°±é¡ºä¾¿æŠŠæ•´ä¸ªè¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜éƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥é£¨åæ¥è€…ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸å…³æºä»£ç å·²å¼€æºè‡³&lt;a href=&quot;https://github.com/zhutmost/edgeboard&quot;&gt;Github&lt;/a&gt;ï¼Œé¢„ç¼–è¯‘PYNQé•œåƒæ–‡ä»¶æˆ‘ä¹Ÿå·²ä¸Šä¼ è‡³&lt;a href=&quot;https://www.aliyundrive.com/s/6biJpMiKrpD&quot;&gt;é˜¿é‡Œäº‘ç›˜&lt;/a&gt;ã€‚å› ä¸ºè®¾å¤‡æœ‰é™ï¼Œæˆ‘æ²¡æœ‰ä¸ºè¿™ä¸ªé•œåƒè¿›è¡Œæ‰€æœ‰å¤–è®¾çš„ä¸Šæ¿æµ‹è¯•ã€‚å¦‚æœä½ å‘ç°äº†ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿å’Œæˆ‘è”ç³»ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Engineering" scheme="https://zhutmost.com/categories/Engineering/"/>
    
    
    <category term="FPGA" scheme="https://zhutmost.com/tags/FPGA/"/>
    
    <category term="PYNQ" scheme="https://zhutmost.com/tags/PYNQ/"/>
    
  </entry>
  
</feed>
